
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://geemap.org/geemap/">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.0">
    
    
      
        <title>geemap module - geemap</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a3f8f96a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-186406134-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="" data-md-color-accent="">
      
        <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#geemap-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://geemap.org" title="geemap" class="md-header__button md-logo" aria-label="geemap">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            geemap
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              geemap module
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/giswqs/geemap/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://geemap.org" title="geemap" class="md-nav__button md-logo" aria-label="geemap">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    geemap
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/giswqs/geemap/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../get-started/" class="md-nav__link">
        Get Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cheatsheet/" class="md-nav__link">
        Cheat Sheet
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        Geemap Tutorials
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://tutorials.geemap.org" class="md-nav__link">
        GEE Tutorials
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../citations/" class="md-nav__link">
        Citations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://geemap-tutorials.herokuapp.com" class="md-nav__link">
        Voil√† App
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://blog.gishub.org" class="md-nav__link">
        Blog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://www.youtube.com/c/QiushengWu" class="md-nav__link">
        YouTube Channel
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/giswqs/geemap/issues" class="md-nav__link">
        Report Issues
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16" checked>
      
      <label class="md-nav__link" for="nav-16">
        API Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="nav-16">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../basemaps/" class="md-nav__link">
        basemaps module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cartoee/" class="md-nav__link">
        cartoee module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../colormaps/" class="md-nav__link">
        colormaps module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        common module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../conversion/" class="md-nav__link">
        conversion module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../eefolium/" class="md-nav__link">
        eefolium module
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          geemap module
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        geemap module
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap" class="md-nav__link">
    geemap.geemap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.Map" class="md-nav__link">
    Map
  </a>
  
    <nav class="md-nav" aria-label="Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_basemap" class="md-nav__link">
    add_basemap()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_COG_layer" class="md-nav__link">
    add_COG_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_COG_mosaic" class="md-nav__link">
    add_COG_mosaic()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_colorbar" class="md-nav__link">
    add_colorbar()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_ee_layer" class="md-nav__link">
    add_ee_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_geojson" class="md-nav__link">
    add_geojson()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_kml" class="md-nav__link">
    add_kml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_landsat_ts_gif" class="md-nav__link">
    add_landsat_ts_gif()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_layer_control" class="md-nav__link">
    add_layer_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_legend" class="md-nav__link">
    add_legend()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_maker_cluster" class="md-nav__link">
    add_maker_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_minimap" class="md-nav__link">
    add_minimap()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_raster" class="md-nav__link">
    add_raster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_shapefile" class="md-nav__link">
    add_shapefile()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_STAC_layer" class="md-nav__link">
    add_STAC_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_styled_vector" class="md-nav__link">
    add_styled_vector()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_tile_layer" class="md-nav__link">
    add_tile_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_wms_layer" class="md-nav__link">
    add_wms_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.addLayer" class="md-nav__link">
    addLayer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.addLayerControl" class="md-nav__link">
    addLayerControl()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.basemap_demo" class="md-nav__link">
    basemap_demo()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.center_object" class="md-nav__link">
    center_object()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.centerObject" class="md-nav__link">
    centerObject()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.create_vis_widget" class="md-nav__link">
    create_vis_widget()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_layer_on_top" class="md-nav__link">
    draw_layer_on_top()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.extract_values_to_points" class="md-nav__link">
    extract_values_to_points()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.find_layer" class="md-nav__link">
    find_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.find_layer_index" class="md-nav__link">
    find_layer_index()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.get_scale" class="md-nav__link">
    get_scale()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.getScale" class="md-nav__link">
    getScale()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.image_overlay" class="md-nav__link">
    image_overlay()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.layer_opacity" class="md-nav__link">
    layer_opacity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.marker_cluster" class="md-nav__link">
    marker_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot" class="md-nav__link">
    plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot_demo" class="md-nav__link">
    plot_demo()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot_raster" class="md-nav__link">
    plot_raster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_colorbar" class="md-nav__link">
    remove_colorbar()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_drawn_features" class="md-nav__link">
    remove_drawn_features()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_last_drawn" class="md-nav__link">
    remove_last_drawn()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_center" class="md-nav__link">
    set_center()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_control_visibility" class="md-nav__link">
    set_control_visibility()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_options" class="md-nav__link">
    set_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_plot_options" class="md-nav__link">
    set_plot_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setCenter" class="md-nav__link">
    setCenter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setControlVisibility" class="md-nav__link">
    setControlVisibility()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setOptions" class="md-nav__link">
    setOptions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.split_map" class="md-nav__link">
    split_map()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_html" class="md-nav__link">
    to_html()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_image" class="md-nav__link">
    to_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.toolbar_reset" class="md-nav__link">
    toolbar_reset()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ts_inspector" class="md-nav__link">
    ts_inspector()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.video_overlay" class="md-nav__link">
    video_overlay()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoom_to_object" class="md-nav__link">
    zoom_to_object()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoomToObject" class="md-nav__link">
    zoomToObject()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.ee_tile_layer" class="md-nav__link">
    ee_tile_layer()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../legends/" class="md-nav__link">
        legends module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ml/" class="md-nav__link">
        ml module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../toolbar/" class="md-nav__link">
        toolbar module
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17" >
      
      <label class="md-nav__link" for="nav-17">
        Notebooks
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Notebooks" data-md-level="1">
        <label class="md-nav__title" for="nav-17">
          <span class="md-nav__icon md-icon"></span>
          Notebooks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_geemap_key_features/" class="md-nav__link">
        00 geemap key features
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/01_geemap_intro/" class="md-nav__link">
        01 geemap intro
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/02_using_basemaps/" class="md-nav__link">
        02 using basemaps
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/03_inspector_tool/" class="md-nav__link">
        03 inspector tool
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/04_split_panel_map/" class="md-nav__link">
        04 split panel map
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/05_drawing_tools/" class="md-nav__link">
        05 drawing tools
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/06_marker_cluster/" class="md-nav__link">
        06 marker cluster
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/07_geojson/" class="md-nav__link">
        07 geojson
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/08_ee_js_to_ipynb/" class="md-nav__link">
        08 ee js to ipynb
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/09_plotting/" class="md-nav__link">
        09 plotting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/10_shapefiles/" class="md-nav__link">
        10 shapefiles
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/11_export_image/" class="md-nav__link">
        11 export image
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/12_zonal_statistics/" class="md-nav__link">
        12 zonal statistics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/13_zonal_statistics_by_group/" class="md-nav__link">
        13 zonal statistics by group
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/14_legends/" class="md-nav__link">
        14 legends
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/15_convert_js_to_py/" class="md-nav__link">
        15 convert js to py
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/16_add_animated_text/" class="md-nav__link">
        16 add animated text
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/17_add_colorbar_to_gif/" class="md-nav__link">
        17 add colorbar to gif
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/18_create_landsat_timelapse/" class="md-nav__link">
        18 create landsat timelapse
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/19_search_places_and_datasets/" class="md-nav__link">
        19 search places and datasets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/20_timeseries_inspector/" class="md-nav__link">
        20 timeseries inspector
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/21_export_map_to_html_png/" class="md-nav__link">
        21 export map to html png
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/22_import_scripts/" class="md-nav__link">
        22 import scripts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/23_import_assets/" class="md-nav__link">
        23 import assets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/24_publish_maps/" class="md-nav__link">
        24 publish maps
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/25_load_rasters/" class="md-nav__link">
        25 load rasters
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/26_heroku/" class="md-nav__link">
        26 heroku
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/27_timelapse_app/" class="md-nav__link">
        27 timelapse app
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/28_voila/" class="md-nav__link">
        28 voila
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/29_pydeck/" class="md-nav__link">
        29 pydeck
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/30_image_props_stats/" class="md-nav__link">
        30 image props stats
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/31_unsupervised_classification/" class="md-nav__link">
        31 unsupervised classification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/32_supervised_classification/" class="md-nav__link">
        32 supervised classification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/33_accuracy_assessment/" class="md-nav__link">
        33 accuracy assessment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/34_extract_values/" class="md-nav__link">
        34 extract values
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/35_geemap_colab/" class="md-nav__link">
        35 geemap colab
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/36_quality_mosaic/" class="md-nav__link">
        36 quality mosaic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/37_pydeck_3d/" class="md-nav__link">
        37 pydeck 3d
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/38_cloud_geotiff/" class="md-nav__link">
        38 cloud geotiff
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/39_timelapse/" class="md-nav__link">
        39 timelapse
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/40_ipywidgets/" class="md-nav__link">
        40 ipywidgets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/41_water_app/" class="md-nav__link">
        41 water app
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/42_upload_data/" class="md-nav__link">
        42 upload data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/43_extract_values_to_points/" class="md-nav__link">
        43 extract values to points
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/44_cog_stac/" class="md-nav__link">
        44 cog stac
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/45_cog_mosaic/" class="md-nav__link">
        45 cog mosaic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/46_local_rf_training/" class="md-nav__link">
        46 local rf training
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/47_image_thumbnails/" class="md-nav__link">
        47 image thumbnails
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/48_folium_legend/" class="md-nav__link">
        48 folium legend
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/49_colorbar/" class="md-nav__link">
        49 colorbar
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/50_cartoee_quickstart/" class="md-nav__link">
        50 cartoee quickstart
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/51_cartoee_projections/" class="md-nav__link">
        51 cartoee projections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/52_cartoee_gif/" class="md-nav__link">
        52 cartoee gif
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/53_layer_vis/" class="md-nav__link">
        53 layer vis
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/54_vector_vis/" class="md-nav__link">
        54 vector vis
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/55_raster_vis/" class="md-nav__link">
        55 raster vis
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/56_local_data/" class="md-nav__link">
        56 local data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/57_cartoee_blend/" class="md-nav__link">
        57 cartoee blend
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/58_shp_kml/" class="md-nav__link">
        58 shp kml
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/59_whitebox/" class="md-nav__link">
        59 whitebox
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/60_colormaps/" class="md-nav__link">
        60 colormaps
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/61_cartoee_scalebar/" class="md-nav__link">
        61 cartoee scalebar
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-17-63" type="checkbox" id="nav-17-63" >
      
      <label class="md-nav__link" for="nav-17-63">
        miscellaneous
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="miscellaneous" data-md-level="2">
        <label class="md-nav__title" for="nav-17-63">
          <span class="md-nav__icon md-icon"></span>
          miscellaneous
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/cartoee_colab/" class="md-nav__link">
        Cartoee colab
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/cartoee_projections/" class="md-nav__link">
        Cartoee projections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/cartoee_quickstart/" class="md-nav__link">
        Cartoee quickstart
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/cartoee_scalebar/" class="md-nav__link">
        Cartoee scalebar
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/cartoee_subplots/" class="md-nav__link">
        Cartoee subplots
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/file_browser/" class="md-nav__link">
        File browser
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/geemap_and_earthengine/" class="md-nav__link">
        Geemap and earthengine
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/geemap_and_folium/" class="md-nav__link">
        Geemap and folium
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/geemap_and_ipyleaflet/" class="md-nav__link">
        Geemap and ipyleaflet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/geemap_and_ipywidgets/" class="md-nav__link">
        Geemap and ipywidgets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/geemap_colab/" class="md-nav__link">
        Geemap colab
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/geopandas/" class="md-nav__link">
        Geopandas
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/image_overlay/" class="md-nav__link">
        Image overlay
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/ipyleaflet_draw_control/" class="md-nav__link">
        Ipyleaflet draw control
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/ipyleaflet_tutorials/" class="md-nav__link">
        Ipyleaflet tutorials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/ipywidgets_demo/" class="md-nav__link">
        Ipywidgets demo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/kml_kmz/" class="md-nav__link">
        Kml kmz
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/local_rf_training/" class="md-nav__link">
        Local rf training
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/mouse_click_coordinates/" class="md-nav__link">
        Mouse click coordinates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/netcdf/" class="md-nav__link">
        Netcdf
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/notebook_template/" class="md-nav__link">
        Notebook template
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/oil_palm_and_rubber_plantation/" class="md-nav__link">
        Oil palm and rubber plantation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/qgis_layer_style_file/" class="md-nav__link">
        Qgis layer style file
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/select_features/" class="md-nav__link">
        Select features
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/select_features_old/" class="md-nav__link">
        Select features old
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/surface_water_mapping/" class="md-nav__link">
        Surface water mapping
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/template/" class="md-nav__link">
        Template
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/tn_surface_water/" class="md-nav__link">
        Tn surface water
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/us_census_data/" class="md-nav__link">
        Us census data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/usda_naip_imagery/" class="md-nav__link">
        Usda naip imagery
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/velocity/" class="md-nav__link">
        Velocity
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/video_overlay/" class="md-nav__link">
        Video overlay
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/water_app/" class="md-nav__link">
        Water app
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/xy_to_points/" class="md-nav__link">
        Xy to points
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap" class="md-nav__link">
    geemap.geemap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.Map" class="md-nav__link">
    Map
  </a>
  
    <nav class="md-nav" aria-label="Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_basemap" class="md-nav__link">
    add_basemap()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_COG_layer" class="md-nav__link">
    add_COG_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_COG_mosaic" class="md-nav__link">
    add_COG_mosaic()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_colorbar" class="md-nav__link">
    add_colorbar()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_ee_layer" class="md-nav__link">
    add_ee_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_geojson" class="md-nav__link">
    add_geojson()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_kml" class="md-nav__link">
    add_kml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_landsat_ts_gif" class="md-nav__link">
    add_landsat_ts_gif()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_layer_control" class="md-nav__link">
    add_layer_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_legend" class="md-nav__link">
    add_legend()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_maker_cluster" class="md-nav__link">
    add_maker_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_minimap" class="md-nav__link">
    add_minimap()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_raster" class="md-nav__link">
    add_raster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_shapefile" class="md-nav__link">
    add_shapefile()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_STAC_layer" class="md-nav__link">
    add_STAC_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_styled_vector" class="md-nav__link">
    add_styled_vector()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_tile_layer" class="md-nav__link">
    add_tile_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_wms_layer" class="md-nav__link">
    add_wms_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.addLayer" class="md-nav__link">
    addLayer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.addLayerControl" class="md-nav__link">
    addLayerControl()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.basemap_demo" class="md-nav__link">
    basemap_demo()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.center_object" class="md-nav__link">
    center_object()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.centerObject" class="md-nav__link">
    centerObject()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.create_vis_widget" class="md-nav__link">
    create_vis_widget()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_layer_on_top" class="md-nav__link">
    draw_layer_on_top()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.extract_values_to_points" class="md-nav__link">
    extract_values_to_points()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.find_layer" class="md-nav__link">
    find_layer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.find_layer_index" class="md-nav__link">
    find_layer_index()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.get_scale" class="md-nav__link">
    get_scale()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.getScale" class="md-nav__link">
    getScale()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.image_overlay" class="md-nav__link">
    image_overlay()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.layer_opacity" class="md-nav__link">
    layer_opacity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.marker_cluster" class="md-nav__link">
    marker_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot" class="md-nav__link">
    plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot_demo" class="md-nav__link">
    plot_demo()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot_raster" class="md-nav__link">
    plot_raster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_colorbar" class="md-nav__link">
    remove_colorbar()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_drawn_features" class="md-nav__link">
    remove_drawn_features()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_last_drawn" class="md-nav__link">
    remove_last_drawn()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_center" class="md-nav__link">
    set_center()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_control_visibility" class="md-nav__link">
    set_control_visibility()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_options" class="md-nav__link">
    set_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_plot_options" class="md-nav__link">
    set_plot_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setCenter" class="md-nav__link">
    setCenter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setControlVisibility" class="md-nav__link">
    setControlVisibility()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setOptions" class="md-nav__link">
    setOptions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.split_map" class="md-nav__link">
    split_map()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_html" class="md-nav__link">
    to_html()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_image" class="md-nav__link">
    to_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.toolbar_reset" class="md-nav__link">
    toolbar_reset()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ts_inspector" class="md-nav__link">
    ts_inspector()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.video_overlay" class="md-nav__link">
    video_overlay()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoom_to_object" class="md-nav__link">
    zoom_to_object()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoomToObject" class="md-nav__link">
    zoomToObject()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.ee_tile_layer" class="md-nav__link">
    ee_tile_layer()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              



                
                  <a href="https://github.com/giswqs/geemap/edit/master/docs/geemap.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="geemap-module">geemap module<a class="headerlink" href="#geemap-module" title="Permanent link">&para;</a></h1>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" id="geemap.geemap" style="visibility: hidden; position: absolute;">
        <a class="headerlink" href="#geemap.geemap" title="Permanent link">&para;</a></h2>
<div class="doc doc-contents first">
<p>Main module for interactive mapping using Google Earth Engine Python API and ipyleaflet.
Keep in mind that Earth Engine functions use both camel case and snake case, such as setOptions(), setCenter(), centerObject(), addLayer().
ipyleaflet functions use snake case, such as add_tile_layer(), add_wms_layer(), add_minimap().</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="geemap.geemap.Map">

        <code>Map</code>



      <a class="headerlink" href="#geemap.geemap.Map" title="Permanent link">&para;</a></h2>
<div class="doc doc-contents ">
<p>The Map class inherits from ipyleaflet.Map. The arguments you can pass to the Map can be found at https://ipyleaflet.readthedocs.io/en/latest/api_reference/map.html. By default, the Map will add Google Maps as the basemap. Set add_google_map = False to use OpenStreetMap as the basemap.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ipyleaflet map object.</p>
</td>
</tr>
</tbody>
</table>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_basemap">

<code class="highlight language-python"><span class="n">add_basemap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basemap</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_basemap" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a basemap to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>basemap</code></td>
<td><code>str</code></td>
<td>
<p>Can be one of string from ee_basemaps. Defaults to 'HYBRID'.</p>
</td>
<td><code>'HYBRID'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_basemap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basemap</span><span class="o">=</span><span class="s2">"HYBRID"</span><span class="p">):</span>
    <span class="sd">"""Adds a basemap to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        basemap (str, optional): Can be one of string from ee_basemaps. Defaults to 'HYBRID'.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemap_tiles</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="ow">and</span> <span class="n">basemap_tiles</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">basemap_tiles</span><span class="p">[</span><span class="n">basemap</span><span class="p">])</span>

        <span class="c1"># draw_layer_index = self.find_layer_index(name="Drawn Features")</span>
        <span class="c1"># if draw_layer_index &gt; -1 and draw_layer_index &lt; (len(self.layers) - 1):</span>
        <span class="c1">#     layers = list(self.layers)</span>
        <span class="c1">#     layers = (</span>
        <span class="c1">#         layers[0:draw_layer_index]</span>
        <span class="c1">#         + layers[(draw_layer_index + 1) :]</span>
        <span class="c1">#         + [layers[draw_layer_index]]</span>
        <span class="c1">#     )</span>
        <span class="c1">#     self.layers = layers</span>

    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">"</span><span class="se">\n</span><span class="s2">  "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemap_tiles</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="p">)</span>
        <span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_COG_layer">

<code class="highlight language-python"><span class="n">add_COG_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Untitled'</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_COG_layer" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a COG TileLayer to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The URL of the COG tile layer.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use for the layer. Defaults to 'Untitled'.</p>
</td>
<td><code>'Untitled'</code></td>
</tr>
<tr>
<td><code>attribution</code></td>
<td><code>str</code></td>
<td>
<p>The attribution to use. Defaults to ''.</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The opacity of the layer. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_COG_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"Untitled"</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Adds a COG TileLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the COG tile layer.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to 'Untitled'.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to ''.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>
<span class="sd">    """</span>
    <span class="n">tile_url</span> <span class="o">=</span> <span class="n">get_COG_tile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">center</span> <span class="o">=</span> <span class="n">get_COG_center</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>  <span class="c1"># (lon, lat)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">shown</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lat</span><span class="o">=</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_COG_mosaic">

<code class="highlight language-python"><span class="n">add_COG_mosaic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">links</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Untitled'</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">'anonymous'</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show_footprints</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_COG_mosaic" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Add a virtual mosaic of COGs to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>links</code></td>
<td><code>list</code></td>
<td>
<p>A list of links pointing to COGs.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use for the layer. Defaults to 'Untitled'.</p>
</td>
<td><code>'Untitled'</code></td>
</tr>
<tr>
<td><code>attribution</code></td>
<td><code>str</code></td>
<td>
<p>The attribution to use. Defaults to ''.</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The opacity of the layer. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
<tr>
<td><code>username</code></td>
<td><code>str</code></td>
<td>
<p>The username to create mosaic using the titiler endpoint. Defaults to 'anonymous'.</p>
</td>
<td><code>'anonymous'</code></td>
</tr>
<tr>
<td><code>overwrite</code></td>
<td><code>bool</code></td>
<td>
<p>Whether or not to replace existing layer with the same layer name. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>show_footprints</code></td>
<td><code>bool</code></td>
<td>
<p>Whether or not to show footprints of COGs. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>verbose</code></td>
<td><code>bool</code></td>
<td>
<p>Whether or not to print descriptions. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_COG_mosaic</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">links</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"Untitled"</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">"anonymous"</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">show_footprints</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Add a virtual mosaic of COGs to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        links (list): A list of links pointing to COGs.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to 'Untitled'.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to ''.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>
<span class="sd">        username (str, optional): The username to create mosaic using the titiler endpoint. Defaults to 'anonymous'.</span>
<span class="sd">        overwrite (bool, optional): Whether or not to replace existing layer with the same layer name. Defaults to False.</span>
<span class="sd">        show_footprints (bool, optional): Whether or not to show footprints of COGs. Defaults to False.</span>
<span class="sd">        verbose (bool, optional): Whether or not to print descriptions. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="n">layername</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span> <span class="s2">"_"</span><span class="p">)</span>
    <span class="n">tile</span> <span class="o">=</span> <span class="n">get_COG_mosaic</span><span class="p">(</span>
        <span class="n">links</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="o">=</span><span class="n">titiler_endpoint</span><span class="p">,</span>
        <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
        <span class="n">layername</span><span class="o">=</span><span class="n">layername</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">tile</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">shown</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show_footprints</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">"Generating footprints of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">)</span><span class="si">}</span><span class="s2"> COGs. This might take a while ..."</span>
            <span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
            <span class="n">coord</span> <span class="o">=</span> <span class="n">get_COG_bounds</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">coord</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span>
        <span class="n">fc</span> <span class="o">=</span> <span class="n">coords_to_geojson</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>

        <span class="n">geo_json</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">fc</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">"opacity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">"dashArray"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
                <span class="s2">"fillOpacity"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">"weight"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">"Footprints"</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">geo_json</span><span class="p">)</span>
        <span class="n">center</span> <span class="o">=</span> <span class="n">get_center</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The footprint layer has been added."</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">center</span> <span class="o">=</span> <span class="n">get_COG_center</span><span class="p">(</span><span class="n">links</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">titiler_endpoint</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_colorbar">

<code class="highlight language-python"><span class="n">add_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">categorical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">'45px'</span><span class="p">,</span> <span class="n">transparent_bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_colorbar" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Add a colorbar to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>colors</code></td>
<td><code>list</code></td>
<td>
<p>The set of colors to be used for interpolation. Colors can be provided in the form: * tuples of RGBA ints between 0 and 255 (e.g: (255, 255, 0) or (255, 255, 0, 255)) * tuples of RGBA floats between 0. and 1. (e.g: (1.,1.,0.) or (1., 1., 0., 1.)) * HTML-like string (e.g: ‚Äú#ffff00) * a color name or shortcut (e.g: ‚Äúy‚Äù or ‚Äúyellow‚Äù)</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vmin</code></td>
<td><code>int</code></td>
<td>
<p>The minimal value for the colormap. Values lower than vmin will be bound directly to colors[0].. Defaults to 0.</p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>vmax</code></td>
<td><code>float</code></td>
<td>
<p>The maximal value for the colormap. Values higher than vmax will be bound directly to colors[-1]. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>index</code></td>
<td><code>list</code></td>
<td>
<p>The values corresponding to each color. It has to be sorted, and have the same length as colors. If None, a regular grid between vmin and vmax is created.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>caption</code></td>
<td><code>str</code></td>
<td>
<p>The caption for the colormap. Defaults to "".</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>categorical</code></td>
<td><code>bool</code></td>
<td>
<p>Whether or not to create a categorical colormap. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>step</code></td>
<td><code>int</code></td>
<td>
<p>The step to split the LinearColormap into a StepColormap. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>height</code></td>
<td><code>str</code></td>
<td>
<p>The height of the colormap widget. Defaults to "45px".</p>
</td>
<td><code>'45px'</code></td>
</tr>
<tr>
<td><code>transparent_bg</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to use transparent background for the colormap widget. Defaults to True.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>The position for the colormap widget. Defaults to "bottomright".</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>Layer name of the colorbar to be associated with. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_colorbar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">caption</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
    <span class="n">categorical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="s2">"45px"</span><span class="p">,</span>
    <span class="n">transparent_bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Add a colorbar to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        colors (list): The set of colors to be used for interpolation. Colors can be provided in the form: * tuples of RGBA ints between 0 and 255 (e.g: (255, 255, 0) or (255, 255, 0, 255)) * tuples of RGBA floats between 0. and 1. (e.g: (1.,1.,0.) or (1., 1., 0., 1.)) * HTML-like string (e.g: ‚Äú#ffff00) * a color name or shortcut (e.g: ‚Äúy‚Äù or ‚Äúyellow‚Äù)</span>
<span class="sd">        vmin (int, optional): The minimal value for the colormap. Values lower than vmin will be bound directly to colors[0].. Defaults to 0.</span>
<span class="sd">        vmax (float, optional): The maximal value for the colormap. Values higher than vmax will be bound directly to colors[-1]. Defaults to 1.0.</span>
<span class="sd">        index (list, optional):The values corresponding to each color. It has to be sorted, and have the same length as colors. If None, a regular grid between vmin and vmax is created.. Defaults to None.</span>
<span class="sd">        caption (str, optional): The caption for the colormap. Defaults to "".</span>
<span class="sd">        categorical (bool, optional): Whether or not to create a categorical colormap. Defaults to False.</span>
<span class="sd">        step (int, optional): The step to split the LinearColormap into a StepColormap. Defaults to None.</span>
<span class="sd">        height (str, optional): The height of the colormap widget. Defaults to "45px".</span>
<span class="sd">        transparent_bg (bool, optional): Whether to use transparent background for the colormap widget. Defaults to True.</span>
<span class="sd">        position (str, optional): The position for the colormap widget. Defaults to "bottomright".</span>
<span class="sd">        layer_name (str, optional): Layer name of the colorbar to be associated with. Defaults to None.</span>

<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="n">Box</span>
    <span class="kn">from</span> <span class="nn">branca.colormap</span> <span class="kn">import</span> <span class="n">LinearColormap</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
    <span class="n">output</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

    <span class="k">if</span> <span class="s2">"width"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">output</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"width"</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="n">Box</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="s2">"default"</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The provided color list is invalid."</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"#"</span> <span class="o">+</span> <span class="n">color</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>

    <span class="n">colormap</span> <span class="o">=</span> <span class="n">LinearColormap</span><span class="p">(</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="n">caption</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">categorical</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">colormap_ctrl</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">transparent_bg</span><span class="o">=</span><span class="n">transparent_bg</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">display</span><span class="p">(</span><span class="n">colormap</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="n">colormap_ctrl</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">colormap_ctrl</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">layer_name</span><span class="p">][</span><span class="s2">"colorbar"</span><span class="p">]</span> <span class="o">=</span> <span class="n">colormap_ctrl</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_ee_layer">

<code class="highlight language-python"><span class="n">add_ee_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_ee_layer" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a given EE object to the map as a layer.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Collection|Feature|Image|MapId</code></td>
<td>
<p>The object to add to the map.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>The visualization parameters. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the layer. Defaults to 'Layer N'.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The layer's opacity represented as a number between 0 and 1. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span>
<span class="p">):</span>
    <span class="sd">"""Adds a given EE object to the map as a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Collection|Feature|Image|MapId): The object to add to the map.</span>
<span class="sd">        vis_params (dict, optional): The visualization parameters. Defaults to {}.</span>
<span class="sd">        name (str, optional): The name of the layer. Defaults to 'Layer N'.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer's opacity represented as a number between 0 and 1. Defaults to 1.</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="n">Box</span>

    <span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">"Layer "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">layer_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">err_str</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n\n</span><span class="s2">The image argument in 'addLayer' function must be an instace of one of ee.Image, ee.Geometry, ee.Feature or ee.FeatureCollection."</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span>
        <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span>
        <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>

        <span class="n">width</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="s2">"width"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"width"</span><span class="p">]</span>

        <span class="n">color</span> <span class="o">=</span> <span class="s2">"000000"</span>

        <span class="k">if</span> <span class="s2">"color"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"color"</span><span class="p">]</span>

        <span class="n">image_fill</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">"fillColor"</span><span class="p">:</span> <span class="n">color</span><span class="p">})</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">image_outline</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"00000000"</span><span class="p">,</span> <span class="s2">"width"</span><span class="p">:</span> <span class="n">width</span><span class="p">}</span>
        <span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">image_fill</span><span class="o">.</span><span class="n">blend</span><span class="p">(</span><span class="n">image_outline</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">imagecollection</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>

    <span class="k">if</span> <span class="s2">"palette"</span> <span class="ow">in</span> <span class="n">vis_params</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vis_params</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">],</span> <span class="n">Box</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">]</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">][</span><span class="s2">"default"</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The provided palette is invalid."</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">map_id_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">getMapId</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span>
    <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">map_id_dict</span><span class="p">[</span><span class="s2">"tile_fetcher"</span><span class="p">]</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">"Google Earth Engine"</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">existing_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">"ee_object"</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">existing_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">existing_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">existing_object</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">existing_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"ee_object"</span><span class="p">:</span> <span class="n">ee_object</span><span class="p">,</span>
        <span class="s2">"ee_layer"</span><span class="p">:</span> <span class="n">tile_layer</span><span class="p">,</span>
        <span class="s2">"vis_params"</span><span class="p">:</span> <span class="n">vis_params</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="p">)</span>

    <span class="c1"># draw_layer_index = self.find_layer_index(name="Drawn Features")</span>
    <span class="c1"># if draw_layer_index &gt; -1 and draw_layer_index &lt; (len(self.layers) - 1):</span>
    <span class="c1">#     layers = list(self.layers)</span>
    <span class="c1">#     layers = (</span>
    <span class="c1">#         layers[0:draw_layer_index]</span>
    <span class="c1">#         + layers[(draw_layer_index + 1) :]</span>
    <span class="c1">#         + [layers[draw_layer_index]]</span>
    <span class="c1">#     )</span>
    <span class="c1">#     self.layers = layers</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_geojson">

<code class="highlight language-python"><span class="n">add_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_geojson</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">'Untitled'</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_geojson" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a GeoJSON file to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_geojson</code></td>
<td><code>str</code></td>
<td>
<p>The input file path to the GeoJSON.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>style</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary specifying the style to be used. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to be used.. Defaults to "Untitled".</p>
</td>
<td><code>'Untitled'</code></td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FileNotFoundError</code></td>
<td>
<p>The provided GeoJSON file could not be found.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_geojson</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s2">"Untitled"</span><span class="p">):</span>
    <span class="sd">"""Adds a GeoJSON file to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_geojson (str): The input file path to the GeoJSON.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to "Untitled".</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided GeoJSON file could not be found.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">json</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">"The provided GeoJSON file could not be found."</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"stroke"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">"color"</span><span class="p">:</span> <span class="s2">"#000000"</span><span class="p">,</span>
            <span class="s2">"weight"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"opacity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"fill"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"#000000"</span><span class="p">,</span>
            <span class="s2">"fillOpacity"</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
            <span class="c1"># "clickable": True,</span>
        <span class="p">}</span>

    <span class="n">geo_json</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">geo_json</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_kml">

<code class="highlight language-python"><span class="n">add_kml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_kml</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">'Untitled'</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_kml" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a GeoJSON file to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_kml</code></td>
<td><code>str</code></td>
<td>
<p>The input file path to the KML.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>style</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary specifying the style to be used. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to be used.. Defaults to "Untitled".</p>
</td>
<td><code>'Untitled'</code></td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FileNotFoundError</code></td>
<td>
<p>The provided KML file could not be found.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_kml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_kml</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s2">"Untitled"</span><span class="p">):</span>
    <span class="sd">"""Adds a GeoJSON file to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_kml (str): The input file path to the KML.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to "Untitled".</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided KML file could not be found.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">json</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_kml</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">"The provided KML file could not be found."</span><span class="p">)</span>

    <span class="n">out_json</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">"tmp.geojson"</span><span class="p">)</span>

    <span class="n">kml_to_geojson</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="n">out_json</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"stroke"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">"color"</span><span class="p">:</span> <span class="s2">"#000000"</span><span class="p">,</span>
            <span class="s2">"weight"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"opacity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"fill"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"#000000"</span><span class="p">,</span>
            <span class="s2">"fillOpacity"</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
            <span class="c1"># "clickable": True,</span>
        <span class="p">}</span>

    <span class="n">geo_json</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">geo_json</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_landsat_ts_gif">

<code class="highlight language-python"><span class="n">add_landsat_ts_gif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">'Timelapse'</span><span class="p">,</span> <span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">],</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">])</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_landsat_ts_gif" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a Landsat timelapse to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>Layer name to show under the layer control. Defaults to 'Timelapse'.</p>
</td>
<td><code>'Timelapse'</code></td>
</tr>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>Region of interest to create the timelapse. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>label</code></td>
<td><code>str</code></td>
<td>
<p>A label to shown on the GIF, such as place name. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timelapse. Defaults to 1984.</p>
</td>
<td><code>1984</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timelapse. Defaults to 2019.</p>
</td>
<td><code>2019</code></td>
</tr>
<tr>
<td><code>start_date</code></td>
<td><code>str</code></td>
<td>
<p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</p>
</td>
<td><code>'06-10'</code></td>
</tr>
<tr>
<td><code>end_date</code></td>
<td><code>str</code></td>
<td>
<p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</p>
</td>
<td><code>'09-20'</code></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>list</code></td>
<td>
<p>Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</p>
</td>
<td><code>['NIR', 'Red', 'Green']</code></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>dimensions</code></td>
<td><code>int</code></td>
<td>
<p>a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</p>
</td>
<td><code>768</code></td>
</tr>
<tr>
<td><code>frames_per_second</code></td>
<td><code>int</code></td>
<td>
<p>Animation speed. Defaults to 10.</p>
</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>font_size</code></td>
<td><code>int</code></td>
<td>
<p>Font size of the animated text and label. Defaults to 30.</p>
</td>
<td><code>30</code></td>
</tr>
<tr>
<td><code>font_color</code></td>
<td><code>str</code></td>
<td>
<p>Font color of the animated text and label. Defaults to 'black'.</p>
</td>
<td><code>'white'</code></td>
</tr>
<tr>
<td><code>add_progress_bar</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add a progress bar at the bottom of the GIF. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>progress_bar_color</code></td>
<td><code>str</code></td>
<td>
<p>Color for the progress bar. Defaults to 'white'.</p>
</td>
<td><code>'white'</code></td>
</tr>
<tr>
<td><code>progress_bar_height</code></td>
<td><code>int</code></td>
<td>
<p>Height of the progress bar. Defaults to 5.</p>
</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output animated GIF. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>download</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to download the gif. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>apply_fmask</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>nd_bands</code></td>
<td><code>list</code></td>
<td>
<p>A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first ‚àí second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>nd_threshold</code></td>
<td><code>float</code></td>
<td>
<p>The threshold for extacting pixels from the normalized difference band.</p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>nd_palette</code></td>
<td><code>str</code></td>
<td>
<p>The color palette to use for displaying the normalized difference band.</p>
</td>
<td><code>['black', 'blue']</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_landsat_ts_gif</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">"Timelapse"</span><span class="p">,</span>
    <span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span>
    <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">"06-10"</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s2">"09-20"</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s2">"NIR"</span><span class="p">,</span> <span class="s2">"Red"</span><span class="p">,</span> <span class="s2">"Green"</span><span class="p">],</span>
    <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span>
    <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">font_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">font_color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">,</span>
    <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">progress_bar_color</span><span class="o">=</span><span class="s2">"white"</span><span class="p">,</span>
    <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s2">"black"</span><span class="p">,</span> <span class="s2">"blue"</span><span class="p">],</span>
<span class="p">):</span>
    <span class="sd">"""Adds a Landsat timelapse to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_name (str, optional): Layer name to show under the layer control. Defaults to 'Timelapse'.</span>
<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        label (str, optional): A label to shown on the GIF, such as place name. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2019.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</span>
<span class="sd">        bands (list, optional): Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</span>
<span class="sd">        vis_params (dict, optional): Visualization parameters. Defaults to None.</span>
<span class="sd">        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</span>
<span class="sd">        frames_per_second (int, optional): Animation speed. Defaults to 10.</span>
<span class="sd">        font_size (int, optional): Font size of the animated text and label. Defaults to 30.</span>
<span class="sd">        font_color (str, optional): Font color of the animated text and label. Defaults to 'black'.</span>
<span class="sd">        add_progress_bar (bool, optional): Whether to add a progress bar at the bottom of the GIF. Defaults to True.</span>
<span class="sd">        progress_bar_color (str, optional): Color for the progress bar. Defaults to 'white'.</span>
<span class="sd">        progress_bar_height (int, optional): Height of the progress bar. Defaults to 5.</span>
<span class="sd">        out_gif (str, optional): File path to the output animated GIF. Defaults to None.</span>
<span class="sd">        download (bool, optional): Whether to download the gif. Defaults to False.</span>
<span class="sd">        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</span>
<span class="sd">        nd_bands (list, optional): A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first ‚àí second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).</span>
<span class="sd">        nd_threshold (float, optional): The threshold for extacting pixels from the normalized difference band.</span>
<span class="sd">        nd_palette (str, optional): The color palette to use for displaying the normalized difference band.</span>

<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">[</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                        <span class="p">]</span>
                    <span class="p">],</span>
                    <span class="kc">None</span><span class="p">,</span>
                    <span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The provided roi is invalid. It must be an ee.Geometry"</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">geojson</span> <span class="o">=</span> <span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">minimum_bounding_box</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">adjust_longitude</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

        <span class="n">in_gif</span> <span class="o">=</span> <span class="n">landsat_ts_gif</span><span class="p">(</span>
            <span class="n">roi</span><span class="o">=</span><span class="n">roi</span><span class="p">,</span>
            <span class="n">out_gif</span><span class="o">=</span><span class="n">out_gif</span><span class="p">,</span>
            <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
            <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
            <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span>
            <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span><span class="p">,</span>
            <span class="n">bands</span><span class="o">=</span><span class="n">bands</span><span class="p">,</span>
            <span class="n">vis_params</span><span class="o">=</span><span class="n">vis_params</span><span class="p">,</span>
            <span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span>
            <span class="n">frames_per_second</span><span class="o">=</span><span class="n">frames_per_second</span><span class="p">,</span>
            <span class="n">apply_fmask</span><span class="o">=</span><span class="n">apply_fmask</span><span class="p">,</span>
            <span class="n">nd_bands</span><span class="o">=</span><span class="n">nd_bands</span><span class="p">,</span>
            <span class="n">nd_threshold</span><span class="o">=</span><span class="n">nd_threshold</span><span class="p">,</span>
            <span class="n">nd_palette</span><span class="o">=</span><span class="n">nd_palette</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">in_nd_gif</span> <span class="o">=</span> <span class="n">in_gif</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">".gif"</span><span class="p">,</span> <span class="s2">"_nd.gif"</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">"Adding animated text to GIF ..."</span><span class="p">)</span>
        <span class="n">add_text_to_gif</span><span class="p">(</span>
            <span class="n">in_gif</span><span class="p">,</span>
            <span class="n">in_gif</span><span class="p">,</span>
            <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s2">"2%"</span><span class="p">,</span> <span class="s2">"2%"</span><span class="p">),</span>
            <span class="n">text_sequence</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
            <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
            <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span>
            <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span>
            <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
            <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">add_text_to_gif</span><span class="p">(</span>
                <span class="n">in_nd_gif</span><span class="p">,</span>
                <span class="n">in_nd_gif</span><span class="p">,</span>
                <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s2">"2%"</span><span class="p">,</span> <span class="s2">"2%"</span><span class="p">),</span>
                <span class="n">text_sequence</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
                <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
                <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span>
                <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span>
                <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
                <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">add_text_to_gif</span><span class="p">(</span>
                <span class="n">in_gif</span><span class="p">,</span>
                <span class="n">in_gif</span><span class="p">,</span>
                <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s2">"2%"</span><span class="p">,</span> <span class="s2">"90%"</span><span class="p">),</span>
                <span class="n">text_sequence</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
                <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span>
                <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span>
                <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
                <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># if nd_bands is not None:</span>
            <span class="c1">#     add_text_to_gif(in_nd_gif, in_nd_gif, xy=('2%', '90%'), text_sequence=label,</span>
            <span class="c1">#                     font_size=font_size, font_color=font_color, duration=int(1000 / frames_per_second), add_progress_bar=add_progress_bar, progress_bar_color=progress_bar_color, progress_bar_height=progress_bar_height)</span>

        <span class="k">if</span> <span class="n">is_tool</span><span class="p">(</span><span class="s2">"ffmpeg"</span><span class="p">):</span>
            <span class="n">reduce_gif_size</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">reduce_gif_size</span><span class="p">(</span><span class="n">in_nd_gif</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">"Adding GIF to the map ..."</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_overlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image_overlay</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">in_nd_gif</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span> <span class="o">+</span> <span class="s2">" ND"</span>
            <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The timelapse has been added to the map."</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">download</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">create_download_link</span><span class="p">(</span>
                <span class="n">in_gif</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">"Click here to download the Landsat timelapse: "</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">display</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">link2</span> <span class="o">=</span> <span class="n">create_download_link</span><span class="p">(</span>
                    <span class="n">in_nd_gif</span><span class="p">,</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">"Click here to download the Normalized Difference Index timelapse: "</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">display</span><span class="p">(</span><span class="n">link2</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_layer_control">

<code class="highlight language-python"><span class="n">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_layer_control" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds the layer control to the map.</p>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Adds the layer control to the map."""</span>
    <span class="k">pass</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_legend">

<code class="highlight language-python"><span class="n">add_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">legend_title</span><span class="o">=</span><span class="s1">'Legend'</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_legend" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a customized basemap to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>legend_title</code></td>
<td><code>str</code></td>
<td>
<p>Title of the legend. Defaults to 'Legend'.</p>
</td>
<td><code>'Legend'</code></td>
</tr>
<tr>
<td><code>legend_dict</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary containing legend items as keys and color as values. If provided, legend_keys and legend_colors will be ignored. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>legend_keys</code></td>
<td><code>list</code></td>
<td>
<p>A list of legend keys. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>legend_colors</code></td>
<td><code>list</code></td>
<td>
<p>A list of legend colors. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the legend. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>builtin_legend</code></td>
<td><code>str</code></td>
<td>
<p>Name of the builtin legend to add to the map. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>Layer name of the legend to be associated with. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">legend_title</span><span class="o">=</span><span class="s2">"Legend"</span><span class="p">,</span>
    <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">legend_keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">legend_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span><span class="p">,</span>
    <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Adds a customized basemap to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        legend_title (str, optional): Title of the legend. Defaults to 'Legend'.</span>
<span class="sd">        legend_dict (dict, optional): A dictionary containing legend items as keys and color as values. If provided, legend_keys and legend_colors will be ignored. Defaults to None.</span>
<span class="sd">        legend_keys (list, optional): A list of legend keys. Defaults to None.</span>
<span class="sd">        legend_colors (list, optional): A list of legend colors. Defaults to None.</span>
<span class="sd">        position (str, optional): Position of the legend. Defaults to 'bottomright'.</span>
<span class="sd">        builtin_legend (str, optional): Name of the builtin legend to add to the map. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): Layer name of the legend to be associated with. Defaults to None.</span>

<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">"geemap"</span><span class="p">,</span> <span class="s2">"geemap.py"</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">legend_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">"data/template/legend.html"</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">"min_width"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">min_width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">min_wdith</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"min_width"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"max_width"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"max_width"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"min_height"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">min_height</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">min_height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"min_height"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"max_height"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"max_height"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"height"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"height"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"width"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"width"</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="s2">"300px"</span>
    <span class="k">if</span> <span class="n">height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="s2">"400px"</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">legend_template</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The legend template does not exist."</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">legend_keys</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_keys</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The legend keys must be a list."</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">legend_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"One"</span><span class="p">,</span> <span class="s2">"Two"</span><span class="p">,</span> <span class="s2">"Three"</span><span class="p">,</span> <span class="s2">"Four"</span><span class="p">,</span> <span class="s2">"ect"</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">legend_colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The legend colors must be a list."</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">legend_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span>
            <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"#"</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">legend_colors</span>
        <span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The legend colors must be a list of tuples."</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">legend_colors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">"#8DD3C7"</span><span class="p">,</span>
            <span class="s2">"#FFFFB3"</span><span class="p">,</span>
            <span class="s2">"#BEBADA"</span><span class="p">,</span>
            <span class="s2">"#FB8072"</span><span class="p">,</span>
            <span class="s2">"#80B1D3"</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">legend_keys</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">legend_colors</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The legend keys and values must be the same length."</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_builtin_legends</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># builtin_legend = builtin_legend.upper()</span>
        <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_builtin_legends</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">"The builtin legend must be one of the following: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_builtin_legends</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="p">[</span><span class="n">builtin_legend</span><span class="p">]</span>
            <span class="n">legend_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">legend_colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">legend_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The legend dict must be a dictionary."</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">legend_colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">legend_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">"topleft"</span><span class="p">,</span>
        <span class="s2">"topright"</span><span class="p">,</span>
        <span class="s2">"bottomleft"</span><span class="p">,</span>
        <span class="s2">"bottomright"</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">"The position must be one of the following: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_positions</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">footer</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">legend_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"Legend"</span><span class="p">,</span> <span class="n">legend_title</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">legend_keys</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">legend_colors</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"#"</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s2">"#"</span> <span class="o">+</span> <span class="n">color</span>
        <span class="n">item</span> <span class="o">=</span> <span class="s2">"      &lt;li&gt;&lt;span style='background:</span><span class="si">{}</span><span class="s2">;'&gt;&lt;/span&gt;</span><span class="si">{}</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">color</span><span class="p">,</span> <span class="n">key</span>
        <span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="n">legend_html</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">content</span> <span class="o">+</span> <span class="n">footer</span>
    <span class="n">legend_text</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">legend_html</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">legend_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_widget</span>
            <span class="n">legend_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_control</span><span class="p">)</span>

        <span class="n">legend_output_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span>
            <span class="n">layout</span><span class="o">=</span><span class="p">{</span>
                <span class="c1"># "border": "1px solid black",</span>
                <span class="s2">"max_width"</span><span class="p">:</span> <span class="n">max_width</span><span class="p">,</span>
                <span class="s2">"min_width"</span><span class="p">:</span> <span class="n">min_width</span><span class="p">,</span>
                <span class="s2">"max_height"</span><span class="p">:</span> <span class="n">max_height</span><span class="p">,</span>
                <span class="s2">"min_height"</span><span class="p">:</span> <span class="n">min_height</span><span class="p">,</span>
                <span class="s2">"height"</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span>
                <span class="s2">"width"</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                <span class="s2">"overflow"</span><span class="p">:</span> <span class="s2">"scroll"</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="n">legend_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">legend_output_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span>
        <span class="p">)</span>
        <span class="n">legend_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">legend_text</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">legend_output_widget</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">legend_widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">legend_widget</span> <span class="o">=</span> <span class="n">legend_output_widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_control</span> <span class="o">=</span> <span class="n">legend_control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">legend_control</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">layer_name</span><span class="p">][</span><span class="s2">"legend"</span><span class="p">]</span> <span class="o">=</span> <span class="n">legend_control</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_maker_cluster">

<code class="highlight language-python"><span class="n">add_maker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="s1">'click'</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_maker_cluster" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Captures user inputs and add markers to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td><code>str</code></td>
<td>
<p>[description]. Defaults to 'click'.</p>
</td>
<td><code>'click'</code></td>
</tr>
<tr>
<td><code>add_marker</code></td>
<td><code>bool</code></td>
<td>
<p>If True, add markers to the map. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>a marker cluster.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_maker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="s2">"click"</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Captures user inputs and add markers to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        event (str, optional): [description]. Defaults to 'click'.</span>
<span class="sd">        add_marker (bool, optional): If True, add markers to the map. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: a marker cluster.</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Marker Cluster"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"coordinates"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">"click"</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"click"</span><span class="p">:</span>
            <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
            <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"mousemove"</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># cursor style: https://www.w3schools.com/cssref/pr_class_cursor.asp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"cursor"</span><span class="p">:</span> <span class="s2">"crosshair"</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_minimap">

<code class="highlight language-python"><span class="n">add_minimap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_minimap" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a minimap (overview) to the ipyleaflet map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>Initial map zoom level. Defaults to 5.</p>
</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the minimap. Defaults to "bottomright".</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_minimap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span><span class="p">):</span>
    <span class="sd">"""Adds a minimap (overview) to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        zoom (int, optional): Initial map zoom level. Defaults to 5.</span>
<span class="sd">        position (str, optional): Position of the minimap. Defaults to "bottomright".</span>
<span class="sd">    """</span>
    <span class="n">minimap</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span>
        <span class="n">zoom_control</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">attribution_control</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">center</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span>
        <span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="n">basemap_tiles</span><span class="p">[</span><span class="s2">"ROADMAP"</span><span class="p">]],</span>
    <span class="p">)</span>
    <span class="n">minimap</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">"150px"</span>
    <span class="n">minimap</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="s2">"150px"</span>
    <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">link</span><span class="p">((</span><span class="n">minimap</span><span class="p">,</span> <span class="s2">"center"</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"center"</span><span class="p">))</span>
    <span class="n">minimap_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">minimap</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">minimap_control</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_raster">

<code class="highlight language-python"><span class="n">add_raster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x_dim</span><span class="o">=</span><span class="s1">'x'</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="s1">'y'</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_raster" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a local raster dataset to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>image</code></td>
<td><code>str</code></td>
<td>
<p>The image file path.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>int or list</code></td>
<td>
<p>The image bands to use. It can be either a nubmer (e.g., 1) or a list (e.g., [3, 2, 1]). Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use for the raster. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>colormap</code></td>
<td><code>str</code></td>
<td>
<p>The name of the colormap to use for the raster, such as 'gray' and 'terrain'. More can be found at https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>x_dim</code></td>
<td><code>str</code></td>
<td>
<p>The x dimension. Defaults to 'x'.</p>
</td>
<td><code>'x'</code></td>
</tr>
<tr>
<td><code>y_dim</code></td>
<td><code>str</code></td>
<td>
<p>The y dimension. Defaults to 'y'.</p>
</td>
<td><code>'y'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_raster</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">x_dim</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span>
    <span class="n">y_dim</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Adds a local raster dataset to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str): The image file path.</span>
<span class="sd">        bands (int or list, optional): The image bands to use. It can be either a nubmer (e.g., 1) or a list (e.g., [3, 2, 1]). Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to use for the raster. Defaults to None.</span>
<span class="sd">        colormap (str, optional): The name of the colormap to use for the raster, such as 'gray' and 'terrain'. More can be found at https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html. Defaults to None.</span>
<span class="sd">        x_dim (str, optional): The x dimension. Defaults to 'x'.</span>
<span class="sd">        y_dim (str, optional): The y dimension. Defaults to 'y'.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">xarray_leaflet</span>

    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="c1"># import platform</span>
        <span class="c1"># if platform.system() != "Windows":</span>
        <span class="c1">#     # install_from_github(</span>
        <span class="c1">#     #     url='https://github.com/davidbrochart/xarray_leaflet')</span>
        <span class="c1">#     check_install('xarray_leaflet')</span>
        <span class="c1">#     import xarray_leaflet</span>
        <span class="c1"># else:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">"You need to install xarray_leaflet first. See https://github.com/davidbrochart/xarray_leaflet"</span>
        <span class="p">)</span>

    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">rioxarray</span>

    <span class="c1"># import xarray as xr</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">"ignore"</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The image file does not exist."</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">inferno</span>

    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_name</span> <span class="o">=</span> <span class="s2">"Layer_"</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colormap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">colormap</span><span class="p">)</span>

    <span class="n">da</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># print(da.rio.nodata)</span>

    <span class="n">multi_band</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">band</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">multi_band</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bands</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">multi_band</span><span class="p">:</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_nodata</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_nodata</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">bands</span><span class="p">)</span>

    <span class="c1"># crs = da.rio.crs</span>
    <span class="c1"># nan = da.attrs['nodatavals'][0]</span>
    <span class="c1"># da = da / da.max()</span>
    <span class="c1"># # if multi_band:</span>
    <span class="c1"># da = xr.where(da == nan, np.nan, da)</span>
    <span class="c1"># da = da.rio.write_nodata(0)</span>
    <span class="c1"># da = da.rio.write_crs(crs)</span>

    <span class="k">if</span> <span class="n">multi_band</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">leaflet</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_dim</span><span class="o">=</span><span class="n">x_dim</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="n">y_dim</span><span class="p">,</span> <span class="n">rgb_dim</span><span class="o">=</span><span class="s2">"band"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">leaflet</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_dim</span><span class="o">=</span><span class="n">x_dim</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="n">y_dim</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">)</span>

    <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">layer_name</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_shapefile">

<code class="highlight language-python"><span class="n">add_shapefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_shp</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">'Untitled'</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_shapefile" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a shapefile to the map</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_shp</code></td>
<td><code>str</code></td>
<td>
<p>The input file path to the shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>style</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary specifying the style to be used. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to be used. Defaults to "Untitled".</p>
</td>
<td><code>'Untitled'</code></td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FileNotFoundError</code></td>
<td>
<p>The provided shapefile could not be found.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_shapefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_shp</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s2">"Untitled"</span><span class="p">):</span>
    <span class="sd">"""Adds a shapefile to the map</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): The input file path to the shapefile.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used. Defaults to "Untitled".</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided shapefile could not be found.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">"The provided shapefile could not be found."</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"stroke"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">"color"</span><span class="p">:</span> <span class="s2">"#000000"</span><span class="p">,</span>
            <span class="s2">"weight"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"opacity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"fill"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"#000000"</span><span class="p">,</span>
            <span class="s2">"fillOpacity"</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
            <span class="c1"># "clickable": True,</span>
        <span class="p">}</span>

    <span class="n">geo_json</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">geo_json</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_STAC_layer">

<code class="highlight language-python"><span class="n">add_STAC_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Untitled'</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_STAC_layer" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a STAC TileLayer to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The URL of the COG tile layer.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use for the layer. Defaults to 'Untitled'.</p>
</td>
<td><code>'Untitled'</code></td>
</tr>
<tr>
<td><code>attribution</code></td>
<td><code>str</code></td>
<td>
<p>The attribution to use. Defaults to ''.</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The opacity of the layer. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_STAC_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"Untitled"</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Adds a STAC TileLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the COG tile layer.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to 'Untitled'.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to ''.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>
<span class="sd">    """</span>
    <span class="n">tile_url</span> <span class="o">=</span> <span class="n">get_STAC_tile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">center</span> <span class="o">=</span> <span class="n">get_STAC_center</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">shown</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lat</span><span class="o">=</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_styled_vector">

<code class="highlight language-python"><span class="n">add_styled_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">'Untitled'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_styled_vector" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a styled vector to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>An ee.FeatureCollection.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>column</code></td>
<td><code>str</code></td>
<td>
<p>The column name to use for styling.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>palette</code></td>
<td><code>list</code></td>
<td>
<p>The palette (e.g., list of colors) to use for styling.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>The name to be used for the new layer. Defaults to "Untitled".</p>
</td>
<td><code>'Untitled'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_styled_vector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s2">"Untitled"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">"""Adds a styled vector to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An ee.FeatureCollection.</span>
<span class="sd">        column (str): The column name to use for styling.</span>
<span class="sd">        palette (list): The palette (e.g., list of colors) to use for styling.</span>
<span class="sd">        layer_name (str, optional): The name to be used for the new layer. Defaults to "Untitled".</span>
<span class="sd">    """</span>
    <span class="n">styled_vector</span> <span class="o">=</span> <span class="n">vector_styling</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">styled_vector</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">"styleProperty"</span><span class="p">:</span> <span class="s2">"style"</span><span class="p">}),</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_tile_layer">

<code class="highlight language-python"><span class="n">add_tile_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">'https://</span><span class="si">{s}</span><span class="s1">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Untitled'</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_tile_layer" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a TileLayer to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The URL of the tile layer. Defaults to 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'.</p>
</td>
<td><code>'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use for the layer. Defaults to 'Untitled'.</p>
</td>
<td><code>'Untitled'</code></td>
</tr>
<tr>
<td><code>attribution</code></td>
<td><code>str</code></td>
<td>
<p>The attribution to use. Defaults to ''.</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The opacity of the layer. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_tile_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">"https://</span><span class="si">{s}</span><span class="s2">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png"</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"Untitled"</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Adds a TileLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str, optional): The URL of the tile layer. Defaults to 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to 'Untitled'.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to ''.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">TileLayer</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>

        <span class="c1"># draw_layer_index = self.find_layer_index(name="Drawn Features")</span>
        <span class="c1"># if draw_layer_index &gt; -1 and draw_layer_index &lt; (len(self.layers) - 1):</span>
        <span class="c1">#     layers = list(self.layers)</span>
        <span class="c1">#     layers = (</span>
        <span class="c1">#         layers[0:draw_layer_index]</span>
        <span class="c1">#         + layers[(draw_layer_index + 1) :]</span>
        <span class="c1">#         + [layers[draw_layer_index]]</span>
        <span class="c1">#     )</span>
        <span class="c1">#     self.layers = layers</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Failed to add the specified TileLayer."</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_wms_layer">

<code class="highlight language-python"><span class="n">add_wms_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">layers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'image/jpeg'</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.add_wms_layer" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Add a WMS layer to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The URL of the WMS web service.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>layers</code></td>
<td><code>str</code></td>
<td>
<p>Comma-separated list of WMS layers to show.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use on the layer control. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>attribution</code></td>
<td><code>str</code></td>
<td>
<p>The attribution of the data layer. Defaults to ''.</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>format</code></td>
<td><code>str</code></td>
<td>
<p>WMS image format (use ‚Äòimage/png‚Äô for layers with transparency). Defaults to 'image/jpeg'.</p>
</td>
<td><code>'image/jpeg'</code></td>
</tr>
<tr>
<td><code>transparent</code></td>
<td><code>bool</code></td>
<td>
<p>If True, the WMS service will return images with transparency. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The opacity of the layer. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_wms_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">,</span>
    <span class="n">layers</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">"image/jpeg"</span><span class="p">,</span>
    <span class="n">transparent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Add a WMS layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the WMS web service.</span>
<span class="sd">        layers (str): Comma-separated list of WMS layers to show.</span>
<span class="sd">        name (str, optional): The layer name to use on the layer control. Defaults to None.</span>
<span class="sd">        attribution (str, optional): The attribution of the data layer. Defaults to ''.</span>
<span class="sd">        format (str, optional): WMS image format (use ‚Äòimage/png‚Äô for layers with transparency). Defaults to 'image/jpeg'.</span>
<span class="sd">        transparent (bool, optional): If True, the WMS service will return images with transparency. Defaults to False.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">layers</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">wms_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WMSLayer</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">layers</span><span class="o">=</span><span class="n">layers</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
            <span class="n">transparent</span><span class="o">=</span><span class="n">transparent</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">wms_layer</span><span class="p">)</span>

        <span class="c1"># draw_layer_index = self.find_layer_index(name="Drawn Features")</span>
        <span class="c1"># if draw_layer_index &gt; -1 and draw_layer_index &lt; (len(self.layers) - 1):</span>
        <span class="c1">#     layers = list(self.layers)</span>
        <span class="c1">#     layers = (</span>
        <span class="c1">#         layers[0:draw_layer_index]</span>
        <span class="c1">#         + layers[(draw_layer_index + 1) :]</span>
        <span class="c1">#         + [layers[draw_layer_index]]</span>
        <span class="c1">#     )</span>
        <span class="c1">#     self.layers = layers</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Failed to add the specified WMS TileLayer."</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.addLayer">

<code class="highlight language-python"><span class="n">addLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.addLayer" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a given EE object to the map as a layer.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Collection|Feature|Image|MapId</code></td>
<td>
<p>The object to add to the map.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>The visualization parameters. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the layer. Defaults to 'Layer N'.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The layer's opacity represented as a number between 0 and 1. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span>
<span class="p">):</span>
    <span class="sd">"""Adds a given EE object to the map as a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Collection|Feature|Image|MapId): The object to add to the map.</span>
<span class="sd">        vis_params (dict, optional): The visualization parameters. Defaults to {}.</span>
<span class="sd">        name (str, optional): The name of the layer. Defaults to 'Layer N'.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer's opacity represented as a number between 0 and 1. Defaults to 1.</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="n">Box</span>

    <span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">"Layer "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">layer_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">err_str</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n\n</span><span class="s2">The image argument in 'addLayer' function must be an instace of one of ee.Image, ee.Geometry, ee.Feature or ee.FeatureCollection."</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span>
        <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span>
        <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>

        <span class="n">width</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="s2">"width"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"width"</span><span class="p">]</span>

        <span class="n">color</span> <span class="o">=</span> <span class="s2">"000000"</span>

        <span class="k">if</span> <span class="s2">"color"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"color"</span><span class="p">]</span>

        <span class="n">image_fill</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">"fillColor"</span><span class="p">:</span> <span class="n">color</span><span class="p">})</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">image_outline</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"00000000"</span><span class="p">,</span> <span class="s2">"width"</span><span class="p">:</span> <span class="n">width</span><span class="p">}</span>
        <span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">image_fill</span><span class="o">.</span><span class="n">blend</span><span class="p">(</span><span class="n">image_outline</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">imagecollection</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>

    <span class="k">if</span> <span class="s2">"palette"</span> <span class="ow">in</span> <span class="n">vis_params</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vis_params</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">],</span> <span class="n">Box</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">]</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">][</span><span class="s2">"default"</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The provided palette is invalid."</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">map_id_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">getMapId</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span>
    <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">map_id_dict</span><span class="p">[</span><span class="s2">"tile_fetcher"</span><span class="p">]</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">"Google Earth Engine"</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">existing_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">"ee_object"</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">existing_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">existing_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">existing_object</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">existing_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"ee_object"</span><span class="p">:</span> <span class="n">ee_object</span><span class="p">,</span>
        <span class="s2">"ee_layer"</span><span class="p">:</span> <span class="n">tile_layer</span><span class="p">,</span>
        <span class="s2">"vis_params"</span><span class="p">:</span> <span class="n">vis_params</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="p">)</span>

    <span class="c1"># draw_layer_index = self.find_layer_index(name="Drawn Features")</span>
    <span class="c1"># if draw_layer_index &gt; -1 and draw_layer_index &lt; (len(self.layers) - 1):</span>
    <span class="c1">#     layers = list(self.layers)</span>
    <span class="c1">#     layers = (</span>
    <span class="c1">#         layers[0:draw_layer_index]</span>
    <span class="c1">#         + layers[(draw_layer_index + 1) :]</span>
    <span class="c1">#         + [layers[draw_layer_index]]</span>
    <span class="c1">#     )</span>
    <span class="c1">#     self.layers = layers</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.addLayerControl">

<code class="highlight language-python"><span class="n">addLayerControl</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.addLayerControl" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds the layer control to the map.</p>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Adds the layer control to the map."""</span>
    <span class="k">pass</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.basemap_demo">

<code class="highlight language-python"><span class="n">basemap_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.basemap_demo" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>A demo for using geemap basemaps.</p>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">basemap_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""A demo for using geemap basemaps."""</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">basemap_tiles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
        <span class="n">value</span><span class="o">=</span><span class="s2">"HYBRID"</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">"Basemaps"</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">basemap_name</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]</span>
        <span class="n">old_basemap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">substitute_layer</span><span class="p">(</span><span class="n">old_basemap</span><span class="p">,</span> <span class="n">basemap_tiles</span><span class="p">[</span><span class="n">basemap_name</span><span class="p">])</span>

    <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_click</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>
    <span class="n">basemap_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"topright"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">basemap_control</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.center_object">

<code class="highlight language-python"><span class="n">center_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.center_object" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Centers the map view on a given object.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Element|Geometry</code></td>
<td>
<p>An Earth Engine object to center on a geometry, image or feature.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>The zoom level, from 1 to 24. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">center_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Centers the map view on a given object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Element|Geometry): An Earth Engine object to center on a geometry, image or feature.</span>
<span class="sd">        zoom (int, optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_object</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">"coordinates"</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">"coordinates"</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.centerObject">

<code class="highlight language-python"><span class="n">centerObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.centerObject" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Centers the map view on a given object.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Element|Geometry</code></td>
<td>
<p>An Earth Engine object to center on a geometry, image or feature.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>The zoom level, from 1 to 24. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">center_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Centers the map view on a given object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Element|Geometry): An Earth Engine object to center on a geometry, image or feature.</span>
<span class="sd">        zoom (int, optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_object</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">"coordinates"</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">"coordinates"</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.create_vis_widget">

<code class="highlight language-python"><span class="n">create_vis_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_dict</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.create_vis_widget" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Create a GUI for changing layer visualization parameters interactively.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layer_dict</code></td>
<td><code>dict</code></td>
<td>
<p>A dict containning information about the layer. It is an element from Map.ee_layer_dict.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>An ipywidget.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">create_vis_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_dict</span><span class="p">):</span>
    <span class="sd">"""Create a GUI for changing layer visualization parameters interactively.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_dict (dict): A dict containning information about the layer. It is an element from Map.ee_layer_dict.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: An ipywidget.</span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">branca.colormap</span> <span class="k">as</span> <span class="nn">cmap</span>

    <span class="n">ee_object</span> <span class="o">=</span> <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"ee_object"</span><span class="p">]</span>
    <span class="n">ee_layer</span> <span class="o">=</span> <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"ee_layer"</span><span class="p">]</span>
    <span class="n">vis_params</span> <span class="o">=</span> <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"vis_params"</span><span class="p">]</span>

    <span class="n">layer_name</span> <span class="o">=</span> <span class="n">ee_layer</span><span class="o">.</span><span class="n">name</span>
    <span class="n">layer_opacity</span> <span class="o">=</span> <span class="n">ee_layer</span><span class="o">.</span><span class="n">opacity</span>

    <span class="n">band_names</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">band_count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">min_value</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">max_value</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">sel_bands</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">layer_palette</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">layer_gamma</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">left_value</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">right_value</span> <span class="o">=</span> <span class="mi">10000</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s2">"45px"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">vdir</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>  <span class="c1"># Get branca colormap list</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"_"</span><span class="p">)]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">band_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">band_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">band_names</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">"min"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">min_value</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"min"</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">min_value</span> <span class="o">&lt;</span> <span class="n">left_value</span><span class="p">:</span>
                <span class="n">left_value</span> <span class="o">=</span> <span class="n">min_value</span> <span class="o">-</span> <span class="n">max_value</span>
        <span class="k">if</span> <span class="s2">"max"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"max"</span><span class="p">]</span>
            <span class="n">right_value</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">max_value</span>
        <span class="k">if</span> <span class="s2">"gamma"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">layer_gamma</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"gamma"</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">"bands"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">sel_bands</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"bands"</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">"palette"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">layer_palette</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">]</span>

        <span class="n">vis_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">"5px 5px 5px 8px"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">"330px"</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2"> visualization parameters"</span><span class="p">)</span>

        <span class="n">radio1</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">RadioButtons</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">"1 band (Grayscale)"</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">"width"</span><span class="p">:</span> <span class="s2">"max-content"</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="n">radio2</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">RadioButtons</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">"3 bands (RGB)"</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">"width"</span><span class="p">:</span> <span class="s2">"max-content"</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="n">radio1</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">radio2</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">dropdown_width</span> <span class="o">=</span> <span class="s2">"98px"</span>
        <span class="n">band1_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">band_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">dropdown_width</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">band2_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">band_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">dropdown_width</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">band3_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">band_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">dropdown_width</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">bands_hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>

        <span class="n">legend_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Legend"</span><span class="p">,</span>
            <span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"70px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">concise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"#000000"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"116px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">add_color</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">"plus"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Add a hex color string to the palette"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"32px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">del_color</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">"minus"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Remove a hex color string from the palette"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"32px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">reset_color</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">"eraser"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Remove all color strings from the palette"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"34px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">classes</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">"Any"</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">)],</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Classes:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"115px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">colormap</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">vdir</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">step</span><span class="p">),</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Colormap:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"181px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">classes_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">colormap_options</span> <span class="o">=</span> <span class="n">vdir</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">selected</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">"owner"</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">selected</span> <span class="o">==</span> <span class="s2">"Any"</span><span class="p">:</span>
                    <span class="n">colormap</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">colormap_options</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sel_class</span> <span class="o">=</span> <span class="n">selected</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                    <span class="n">colormap</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">color</span>
                        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colormap_options</span>
                        <span class="k">if</span> <span class="n">color</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="n">sel_class</span>
                    <span class="p">]</span>

        <span class="n">classes</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">classes_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="n">palette</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">layer_palette</span><span class="p">),</span>
            <span class="n">placeholder</span><span class="o">=</span><span class="s2">"List of hex color code (RRGGBB)"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Palette:"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Enter a list of hex color code (RRGGBB)"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"300px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">add_color_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="s2">", "</span> <span class="o">+</span> <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">def</span> <span class="nf">del_color_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)]</span>
                <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>

        <span class="k">def</span> <span class="nf">reset_color_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>

        <span class="n">add_color</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">add_color_clicked</span><span class="p">)</span>
        <span class="n">del_color</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">del_color_clicked</span><span class="p">)</span>
        <span class="n">reset_color</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">reset_color_clicked</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"5px"</span><span class="p">))</span>
        <span class="n">v_spacer</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s2">"5px"</span><span class="p">))</span>
        <span class="n">radio_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">radio1</span><span class="p">,</span> <span class="n">spacer</span><span class="p">,</span> <span class="n">spacer</span><span class="p">,</span> <span class="n">spacer</span><span class="p">,</span> <span class="n">radio2</span><span class="p">])</span>

        <span class="n">value_range</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatRangeSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="n">min_value</span><span class="p">,</span> <span class="n">max_value</span><span class="p">],</span>
            <span class="nb">min</span><span class="o">=</span><span class="n">left_value</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="n">right_value</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Range:"</span><span class="p">,</span>
            <span class="n">disabled</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">readout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">readout_format</span><span class="o">=</span><span class="s2">".1f"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"300px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"45px"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">range_hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">value_range</span><span class="p">,</span> <span class="n">spacer</span><span class="p">])</span>

        <span class="n">opacity</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">layer_opacity</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Opacity:"</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">readout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">readout_format</span><span class="o">=</span><span class="s2">".2f"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"320px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"50px"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">gamma</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">layer_gamma</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Gamma:"</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">readout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">readout_format</span><span class="o">=</span><span class="s2">".2f"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"320px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"50px"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">legend_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Legend"</span><span class="p">,</span>
            <span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"70px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">linear_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Linear colormap"</span><span class="p">,</span>
            <span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"150px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">step_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Step colormap"</span><span class="p">,</span>
            <span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"140px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">legend_title</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"Legend"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Legend title:"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Enter a title for the legend"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"300px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">legend_labels</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"Class 1, Class 2, Class 3"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Legend labels:"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Enter a a list of labels for the legend"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"300px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">colormap_hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">linear_chk</span><span class="p">,</span> <span class="n">step_chk</span><span class="p">])</span>
        <span class="n">legend_vbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">linear_chk_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">step_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">legend_vbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap_hbox</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">step_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">step_chk_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">linear_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">legend_vbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">colormap_hbox</span><span class="p">,</span>
                    <span class="n">legend_title</span><span class="p">,</span>
                    <span class="n">legend_labels</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">linear_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">linear_chk</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">linear_chk_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>
        <span class="n">step_chk</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">step_chk_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">colormap_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">cmap_colors</span> <span class="o">=</span> <span class="n">cmap</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s2">"_schemes"</span><span class="p">][</span><span class="n">colormap</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>

                <span class="n">colorbar</span> <span class="o">=</span> <span class="n">cmap</span><span class="o">.</span><span class="n">LinearColormap</span><span class="p">(</span>
                    <span class="n">colors</span><span class="o">=</span><span class="n">cmap_colors</span><span class="p">,</span>
                    <span class="n">vmin</span><span class="o">=</span><span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">vmax</span><span class="o">=</span><span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">step_chk</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="n">colorbar</span> <span class="o">=</span> <span class="n">colorbar</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cmap_colors</span><span class="p">))</span>

                <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">cmap_colors</span><span class="p">])</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span>
                        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s2">"45px"</span><span class="p">)</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
                        <span class="n">widget</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>

                <span class="n">colorbar_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span>
                <span class="k">with</span> <span class="n">colorbar_output</span><span class="p">:</span>
                    <span class="n">colorbar_output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">"Class </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)))</span>
                    <span class="p">]</span>
                    <span class="n">legend_labels</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

        <span class="n">colormap</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">colormap_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="n">btn_width</span> <span class="o">=</span> <span class="s2">"97.5px"</span>
        <span class="n">import_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Import"</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">"primary"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Import vis params to notebook"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">btn_width</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">apply_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Apply"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Apply vis params to the layer"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">btn_width</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">close_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Close"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Close vis params diaglog"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">btn_width</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">import_btn_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

            <span class="n">vis</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">radio1</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">vis</span><span class="p">[</span><span class="s2">"bands"</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">band1_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">vis</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">]</span> <span class="o">=</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vis</span><span class="p">[</span><span class="s2">"bands"</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">band1_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">band2_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">band3_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="p">]</span>

            <span class="n">vis</span><span class="p">[</span><span class="s2">"min"</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">vis</span><span class="p">[</span><span class="s2">"max"</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">vis</span><span class="p">[</span><span class="s2">"opacity"</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span><span class="o">.</span><span class="n">value</span>
            <span class="n">vis</span><span class="p">[</span><span class="s2">"gamma"</span><span class="p">]</span> <span class="o">=</span> <span class="n">gamma</span><span class="o">.</span><span class="n">value</span>

            <span class="n">create_code_cell</span><span class="p">(</span><span class="sa">f</span><span class="s2">"vis_params = </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">vis</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">apply_btn_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

            <span class="n">vis</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">radio1</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">vis</span><span class="p">[</span><span class="s2">"bands"</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">band1_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">vis</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">]</span> <span class="o">=</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vis</span><span class="p">[</span><span class="s2">"bands"</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">band1_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">band2_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">band3_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="n">vis</span><span class="p">[</span><span class="s2">"gamma"</span><span class="p">]</span> <span class="o">=</span> <span class="n">gamma</span><span class="o">.</span><span class="n">value</span>

            <span class="n">vis</span><span class="p">[</span><span class="s2">"min"</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">vis</span><span class="p">[</span><span class="s2">"max"</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">ee_layer</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">legend_chk</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="s2">"colorbar"</span> <span class="ow">in</span> <span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="ow">and</span> <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"colorbar"</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">layer_dict</span><span class="p">[</span><span class="s2">"colorbar"</span><span class="p">])</span>
                    <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"colorbar"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="k">if</span> <span class="n">linear_chk</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>

                    <span class="k">if</span> <span class="p">(</span>
                        <span class="s2">"legend"</span> <span class="ow">in</span> <span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                        <span class="ow">and</span> <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"legend"</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
                    <span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">layer_dict</span><span class="p">[</span><span class="s2">"legend"</span><span class="p">])</span>
                        <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"legend"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
                            <span class="s2">"#"</span> <span class="o">+</span> <span class="n">color</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
                        <span class="p">]</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">add_colorbar</span><span class="p">(</span>
                            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                            <span class="n">vmin</span><span class="o">=</span><span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                            <span class="n">vmax</span><span class="o">=</span><span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                        <span class="p">)</span>

                <span class="k">elif</span> <span class="n">step_chk</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
                            <span class="s2">"#"</span> <span class="o">+</span> <span class="n">color</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
                        <span class="p">]</span>
                        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
                            <span class="n">label</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">legend_labels</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
                        <span class="p">]</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span>
                            <span class="n">legend_title</span><span class="o">=</span><span class="n">legend_title</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                            <span class="n">legend_keys</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
                            <span class="n">legend_colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                        <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="c1"># if (</span>
                <span class="c1">#     self.colorbar_ctrl is not None</span>
                <span class="c1">#     and self.colorbar_ctrl in self.controls</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.remove_control(self.colorbar_ctrl)</span>
                <span class="c1">#     self.colorbar_widget.close()</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="s2">"colorbar"</span> <span class="ow">in</span> <span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="ow">and</span> <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"colorbar"</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">layer_dict</span><span class="p">[</span><span class="s2">"colorbar"</span><span class="p">])</span>
                    <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"colorbar"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="s2">"legend"</span> <span class="ow">in</span> <span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="ow">and</span> <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"legend"</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">layer_dict</span><span class="p">[</span><span class="s2">"legend"</span><span class="p">])</span>
                    <span class="n">layer_dict</span><span class="p">[</span><span class="s2">"legend"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">close_btn_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vis_control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vis_control</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vis_control</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vis_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">import_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">import_btn_clicked</span><span class="p">)</span>
        <span class="n">apply_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">apply_btn_clicked</span><span class="p">)</span>
        <span class="n">close_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">close_btn_clicked</span><span class="p">)</span>

        <span class="n">color_hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">legend_chk</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">,</span> <span class="n">add_color</span><span class="p">,</span> <span class="n">del_color</span><span class="p">,</span> <span class="n">reset_color</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">btn_hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">import_btn</span><span class="p">,</span> <span class="n">apply_btn</span><span class="p">,</span> <span class="n">close_btn</span><span class="p">])</span>

        <span class="n">gray_box</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">radio_btn</span><span class="p">,</span>
            <span class="n">bands_hbox</span><span class="p">,</span>
            <span class="n">v_spacer</span><span class="p">,</span>
            <span class="n">range_hbox</span><span class="p">,</span>
            <span class="n">opacity</span><span class="p">,</span>
            <span class="n">gamma</span><span class="p">,</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">classes</span><span class="p">,</span> <span class="n">colormap</span><span class="p">]),</span>
            <span class="n">palette</span><span class="p">,</span>
            <span class="n">color_hbox</span><span class="p">,</span>
            <span class="n">legend_vbox</span><span class="p">,</span>
            <span class="n">btn_hbox</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">rgb_box</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">radio_btn</span><span class="p">,</span>
            <span class="n">bands_hbox</span><span class="p">,</span>
            <span class="n">v_spacer</span><span class="p">,</span>
            <span class="n">range_hbox</span><span class="p">,</span>
            <span class="n">opacity</span><span class="p">,</span>
            <span class="n">gamma</span><span class="p">,</span>
            <span class="n">btn_hbox</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">def</span> <span class="nf">legend_chk_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">linear_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">legend_vbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">linear_chk</span><span class="p">,</span> <span class="n">step_chk</span><span class="p">]),</span>
                    <span class="c1"># legend_title,</span>
                    <span class="c1"># legend_labels,</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">legend_vbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">legend_chk</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">legend_chk_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">band_count</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">radio1</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">band1_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">"300px"</span>
            <span class="n">bands_hbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">band1_dropdown</span><span class="p">]</span>
            <span class="n">vis_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">gray_box</span>
            <span class="n">legend_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"#"</span> <span class="o">+</span> <span class="n">color</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)]</span>
                <span class="n">colorbar</span> <span class="o">=</span> <span class="n">cmap</span><span class="o">.</span><span class="n">LinearColormap</span><span class="p">(</span>
                    <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                    <span class="n">vmin</span><span class="o">=</span><span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">vmax</span><span class="o">=</span><span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="p">:</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">radio2</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">sel_bands</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sel_bands</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">sel_bands</span> <span class="o">=</span> <span class="n">band_names</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">band1_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">sel_bands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">band2_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">sel_bands</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">band3_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">sel_bands</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">bands_hbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">band1_dropdown</span><span class="p">,</span>
                <span class="n">band2_dropdown</span><span class="p">,</span>
                <span class="n">band3_dropdown</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="n">vis_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">rgb_box</span>

        <span class="k">def</span> <span class="nf">radio1_observer</span><span class="p">(</span><span class="n">sender</span><span class="p">):</span>
            <span class="n">radio2</span><span class="o">.</span><span class="n">unobserve</span><span class="p">(</span><span class="n">radio2_observer</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
            <span class="n">radio2</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">radio2</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">radio2_observer</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
            <span class="n">band1_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">"300px"</span>
            <span class="n">bands_hbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">band1_dropdown</span><span class="p">]</span>
            <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">layer_palette</span><span class="p">)</span>
            <span class="n">palette</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">add_color</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">del_color</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">reset_color</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">vis_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">gray_box</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"#"</span> <span class="o">+</span> <span class="n">color</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)]</span>
                <span class="n">colorbar</span> <span class="o">=</span> <span class="n">cmap</span><span class="o">.</span><span class="n">LinearColormap</span><span class="p">(</span>
                    <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                    <span class="n">vmin</span><span class="o">=</span><span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">vmax</span><span class="o">=</span><span class="n">value_range</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span>
                        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s2">"45px"</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
                        <span class="n">widget</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="p">:</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">radio2_observer</span><span class="p">(</span><span class="n">sender</span><span class="p">):</span>
            <span class="n">radio1</span><span class="o">.</span><span class="n">unobserve</span><span class="p">(</span><span class="n">radio1_observer</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
            <span class="n">radio1</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">radio1</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">radio1_observer</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
            <span class="n">band1_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">dropdown_width</span>
            <span class="n">bands_hbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">band1_dropdown</span><span class="p">,</span>
                <span class="n">band2_dropdown</span><span class="p">,</span>
                <span class="n">band3_dropdown</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>
            <span class="n">palette</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">add_color</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">del_color</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">reset_color</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">vis_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">rgb_box</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">radio1</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">radio1_observer</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
        <span class="n">radio2</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">radio2_observer</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">vis_widget</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>

        <span class="n">vis_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">"5px 5px 5px 8px"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">"330px"</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2"> visualization parameters"</span><span class="p">)</span>

        <span class="n">new_layer_name</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2"> style"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"New layer name:"</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">color</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">concise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"#000000"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Color:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"140px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">color_opacity</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">layer_opacity</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Opacity:"</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="c1">#             readout_format=".2f",</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"130px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"50px"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">color_opacity_label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">"0px"</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">widgets</span><span class="o">.</span><span class="n">jslink</span><span class="p">((</span><span class="n">color_opacity</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">),</span> <span class="p">(</span><span class="n">color_opacity_label</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">))</span>

        <span class="n">point_size</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntText</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Point size:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"110px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">point_shape_options</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">"circle"</span><span class="p">,</span>
            <span class="s2">"square"</span><span class="p">,</span>
            <span class="s2">"diamond"</span><span class="p">,</span>
            <span class="s2">"cross"</span><span class="p">,</span>
            <span class="s2">"plus"</span><span class="p">,</span>
            <span class="s2">"pentagram"</span><span class="p">,</span>
            <span class="s2">"hexagram"</span><span class="p">,</span>
            <span class="s2">"triangle"</span><span class="p">,</span>
            <span class="s2">"triangle_up"</span><span class="p">,</span>
            <span class="s2">"triangle_down"</span><span class="p">,</span>
            <span class="s2">"triangle_left"</span><span class="p">,</span>
            <span class="s2">"triangle_right"</span><span class="p">,</span>
            <span class="s2">"pentagon"</span><span class="p">,</span>
            <span class="s2">"hexagon"</span><span class="p">,</span>
            <span class="s2">"star5"</span><span class="p">,</span>
            <span class="s2">"star6"</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">point_shape</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">point_shape_options</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"circle"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Point shape:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"185px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">line_width</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntText</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Line width:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"110px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">line_type</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">"solid"</span><span class="p">,</span> <span class="s2">"dotted"</span><span class="p">,</span> <span class="s2">"dashed"</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"solid"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Line type:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"185px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">fill_color</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">concise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"#000000"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Fill Color:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"160px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">fill_color_opacity</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="mf">0.66</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Opacity:"</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="c1">#             readout_format=".2f",</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"110px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"50px"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">fill_color_opacity_label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">"0px"</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">widgets</span><span class="o">.</span><span class="n">jslink</span><span class="p">(</span>
            <span class="p">(</span><span class="n">fill_color_opacity</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">),</span>
            <span class="p">(</span><span class="n">fill_color_opacity_label</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">concise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"#000000"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"116px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>
        <span class="n">add_color</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">"plus"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Add a hex color string to the palette"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"32px"</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">del_color</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">"minus"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Remove a hex color string from the palette"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"32px"</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">reset_color</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">"eraser"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Remove all color strings from the palette"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"34px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">palette</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
            <span class="n">placeholder</span><span class="o">=</span><span class="s2">"List of hex code (RRGGBB) separated by comma"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Palette:"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Enter a list of hex code (RRGGBB) separated by comma"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"300px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">legend_title</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"Legend"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Legend title:"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Enter a title for the legend"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"300px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">legend_labels</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"Labels"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Legend labels:"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Enter a a list of labels for the legend"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"300px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">add_color_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="s2">", "</span> <span class="o">+</span> <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">def</span> <span class="nf">del_color_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)]</span>
                <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>

        <span class="k">def</span> <span class="nf">reset_color_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>

        <span class="n">add_color</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">add_color_clicked</span><span class="p">)</span>
        <span class="n">del_color</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">del_color_clicked</span><span class="p">)</span>
        <span class="n">reset_color</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">reset_color_clicked</span><span class="p">)</span>

        <span class="n">field</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Field:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"140px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">field_values</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Values:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"156px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">classes</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">"Any"</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">)],</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Classes:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"115px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">colormap</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">"viridis"</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"viridis"</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Colormap:"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"181px"</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">"description_width"</span><span class="p">:</span> <span class="s2">"initial"</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">classes_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">colormap_options</span> <span class="o">=</span> <span class="n">vdir</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">selected</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">"owner"</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">selected</span> <span class="o">==</span> <span class="s2">"Any"</span><span class="p">:</span>
                    <span class="n">colormap</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">colormap_options</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sel_class</span> <span class="o">=</span> <span class="n">selected</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                    <span class="n">colormap</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">color</span>
                        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colormap_options</span>
                        <span class="k">if</span> <span class="n">color</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="n">sel_class</span>
                    <span class="p">]</span>

        <span class="n">classes</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">classes_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">colormap_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">cmap_colors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">cmap</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s2">"_schemes"</span><span class="p">][</span><span class="n">colormap</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
                <span class="p">]</span>
                <span class="n">palette</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmap_colors</span><span class="p">)</span>
                <span class="n">colorbar</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">step</span><span class="p">,</span> <span class="n">colormap</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="n">colorbar_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span>
                <span class="k">with</span> <span class="n">colorbar_output</span><span class="p">:</span>
                    <span class="n">colorbar_output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">"Class </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)))</span>
                    <span class="p">]</span>
                    <span class="n">legend_labels</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

        <span class="n">colormap</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">colormap_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="n">btn_width</span> <span class="o">=</span> <span class="s2">"97.5px"</span>
        <span class="n">import_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Import"</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">"primary"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Import vis params to notebook"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">btn_width</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">apply_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Apply"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Apply vis params to the layer"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">btn_width</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">close_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Close"</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">"Close vis params diaglog"</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">btn_width</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">style_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Style by attribute"</span><span class="p">,</span>
            <span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"140px"</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">legend_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"Legend"</span><span class="p">,</span>
            <span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">"70px"</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">compute_label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>

        <span class="n">style_vbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">style_chk</span><span class="p">,</span> <span class="n">compute_label</span><span class="p">])])</span>

        <span class="k">def</span> <span class="nf">style_chk_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span>
                    <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s2">"45px"</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
                    <span class="n">widget</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>
                <span class="n">fill_color</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">colormap</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">vdir</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
                <span class="n">colormap</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">"viridis"</span>
                <span class="n">style_vbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">style_chk</span><span class="p">,</span> <span class="n">compute_label</span><span class="p">]),</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">field</span><span class="p">,</span> <span class="n">field_values</span><span class="p">]),</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">classes</span><span class="p">,</span> <span class="n">colormap</span><span class="p">]),</span>
                    <span class="n">palette</span><span class="p">,</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">legend_chk</span><span class="p">,</span>
                            <span class="n">color_picker</span><span class="p">,</span>
                            <span class="n">add_color</span><span class="p">,</span>
                            <span class="n">del_color</span><span class="p">,</span>
                            <span class="n">reset_color</span><span class="p">,</span>
                        <span class="p">]</span>
                    <span class="p">),</span>
                <span class="p">]</span>
                <span class="n">compute_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">"Computing ..."</span>

                <span class="n">field</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">())</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="n">compute_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>
                <span class="n">classes</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">"Any"</span>
                <span class="n">legend_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">fill_color</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">style_vbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">style_chk</span><span class="p">,</span> <span class="n">compute_label</span><span class="p">])]</span>
                <span class="n">compute_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="c1"># legend_chk.value = False</span>

        <span class="n">style_chk</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">style_chk_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">legend_chk_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">style_vbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">style_vbox</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">legend_title</span><span class="p">,</span> <span class="n">legend_labels</span><span class="p">])</span>
                <span class="p">]</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">"Class </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)))</span>
                    <span class="p">]</span>
                    <span class="n">legend_labels</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">style_vbox</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">style_chk</span><span class="p">,</span> <span class="n">compute_label</span><span class="p">]),</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">field</span><span class="p">,</span> <span class="n">field_values</span><span class="p">]),</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">classes</span><span class="p">,</span> <span class="n">colormap</span><span class="p">]),</span>
                    <span class="n">palette</span><span class="p">,</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">legend_chk</span><span class="p">,</span>
                            <span class="n">color_picker</span><span class="p">,</span>
                            <span class="n">add_color</span><span class="p">,</span>
                            <span class="n">del_color</span><span class="p">,</span>
                            <span class="n">reset_color</span><span class="p">,</span>
                        <span class="p">]</span>
                    <span class="p">),</span>
                <span class="p">]</span>

        <span class="n">legend_chk</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">legend_chk_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">field_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">"new"</span><span class="p">]:</span>
                <span class="n">compute_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">"Computing ..."</span>
                <span class="n">options</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">options</span><span class="p">))</span>
                    <span class="n">options</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

                <span class="n">field_values</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
                <span class="n">compute_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>

        <span class="n">field</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">field_changed</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">get_vis_params</span><span class="p">():</span>

            <span class="n">vis</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">vis</span><span class="p">[</span><span class="s2">"color"</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                <span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">color_opacity</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">255</span><span class="p">))</span>
            <span class="p">)[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">geometry_type</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"Point"</span><span class="p">,</span> <span class="s2">"MultiPoint"</span><span class="p">]:</span>
                <span class="n">vis</span><span class="p">[</span><span class="s2">"pointSize"</span><span class="p">]</span> <span class="o">=</span> <span class="n">point_size</span><span class="o">.</span><span class="n">value</span>
                <span class="n">vis</span><span class="p">[</span><span class="s2">"pointShape"</span><span class="p">]</span> <span class="o">=</span> <span class="n">point_shape</span><span class="o">.</span><span class="n">value</span>
            <span class="n">vis</span><span class="p">[</span><span class="s2">"width"</span><span class="p">]</span> <span class="o">=</span> <span class="n">line_width</span><span class="o">.</span><span class="n">value</span>
            <span class="n">vis</span><span class="p">[</span><span class="s2">"lineType"</span><span class="p">]</span> <span class="o">=</span> <span class="n">line_type</span><span class="o">.</span><span class="n">value</span>
            <span class="n">vis</span><span class="p">[</span><span class="s2">"fillColor"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fill_color</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                <span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">fill_color_opacity</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">255</span><span class="p">))</span>
            <span class="p">)[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">vis</span>

        <span class="k">def</span> <span class="nf">import_btn_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

            <span class="n">vis</span> <span class="o">=</span> <span class="n">get_vis_params</span><span class="p">()</span>
            <span class="n">create_code_cell</span><span class="p">(</span><span class="sa">f</span><span class="s2">"vis_params = </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">vis</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">apply_btn_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

            <span class="n">compute_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">"Computing ..."</span>

            <span class="k">if</span> <span class="n">new_layer_name</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="p">:</span>
                <span class="n">old_layer</span> <span class="o">=</span> <span class="n">new_layer_name</span><span class="o">.</span><span class="n">value</span>

                <span class="k">if</span> <span class="s2">"legend"</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">old_layer</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">old_layer</span><span class="p">][</span><span class="s2">"legend"</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">legend</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">legend</span><span class="p">)</span>
                    <span class="n">legend</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="k">if</span> <span class="s2">"colorbar"</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">old_layer</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">colorbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">old_layer</span><span class="p">][</span><span class="s2">"colorbar"</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">colorbar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>
                    <span class="n">colorbar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">style_chk</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">vis</span> <span class="o">=</span> <span class="n">get_vis_params</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="n">vis</span><span class="p">),</span> <span class="p">{},</span> <span class="n">new_layer_name</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="n">ee_object</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">style_chk</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">","</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span>
            <span class="p">):</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">color</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">fill_color_opacity</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
                    <span class="p">]</span>
                <span class="p">)</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="n">fc</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                    <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">"styleIndex"</span><span class="p">:</span> <span class="n">arr</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">value</span><span class="p">))})</span>
                <span class="p">)</span>
                <span class="n">step</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">colors</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">ceil</span><span class="p">()</span>
                <span class="n">fc</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                    <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s2">"style"</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">"color"</span><span class="p">:</span> <span class="n">color</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">color_opacity</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)))[</span>
                                    <span class="mi">2</span><span class="p">:</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
                                <span class="s2">"pointSize"</span><span class="p">:</span> <span class="n">point_size</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                                <span class="s2">"pointShape"</span><span class="p">:</span> <span class="n">point_shape</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                                <span class="s2">"width"</span><span class="p">:</span> <span class="n">line_width</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                                <span class="s2">"lineType"</span><span class="p">:</span> <span class="n">line_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                                <span class="s2">"fillColor"</span><span class="p">:</span> <span class="n">colors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                    <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span>
                                        <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"styleIndex"</span><span class="p">))</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
                                    <span class="p">)</span><span class="o">.</span><span class="n">floor</span><span class="p">()</span>
                                <span class="p">),</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">)</span>
                <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span>
                    <span class="n">fc</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">"styleProperty"</span><span class="p">:</span> <span class="s2">"style"</span><span class="p">}),</span>
                    <span class="p">{},</span>
                    <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">new_layer_name</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">legend_chk</span><span class="o">.</span><span class="n">value</span>
                    <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">legend_labels</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
                <span class="p">):</span>
                    <span class="n">legend_colors</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">color</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">palette</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
                    <span class="p">]</span>
                    <span class="n">legend_keys</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">label</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">legend_labels</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
                    <span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span>
                        <span class="n">legend_title</span><span class="o">=</span><span class="n">legend_title</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                        <span class="n">legend_keys</span><span class="o">=</span><span class="n">legend_keys</span><span class="p">,</span>
                        <span class="n">legend_colors</span><span class="o">=</span><span class="n">legend_colors</span><span class="p">,</span>
                        <span class="n">layer_name</span><span class="o">=</span><span class="n">new_layer_name</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="p">)</span>

            <span class="n">compute_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">""</span>

        <span class="k">def</span> <span class="nf">close_btn_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vis_control</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vis_control</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vis_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_ctrl</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorbar_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">import_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">import_btn_clicked</span><span class="p">)</span>
        <span class="n">apply_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">apply_btn_clicked</span><span class="p">)</span>
        <span class="n">close_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">close_btn_clicked</span><span class="p">)</span>

        <span class="n">vis_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">new_layer_name</span><span class="p">,</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">color</span><span class="p">,</span> <span class="n">color_opacity</span><span class="p">,</span> <span class="n">color_opacity_label</span><span class="p">]),</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">point_size</span><span class="p">,</span> <span class="n">point_shape</span><span class="p">]),</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">line_width</span><span class="p">,</span> <span class="n">line_type</span><span class="p">]),</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
                <span class="p">[</span><span class="n">fill_color</span><span class="p">,</span> <span class="n">fill_color_opacity</span><span class="p">,</span> <span class="n">fill_color_opacity_label</span><span class="p">]</span>
            <span class="p">),</span>
            <span class="n">style_vbox</span><span class="p">,</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">import_btn</span><span class="p">,</span> <span class="n">apply_btn</span><span class="p">,</span> <span class="n">close_btn</span><span class="p">]),</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="n">geometry_type</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"Point"</span><span class="p">,</span> <span class="s2">"MultiPoint"</span><span class="p">]:</span>
            <span class="n">point_size</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">point_shape</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">point_size</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">point_shape</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">vis_widget</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.draw_layer_on_top">

<code class="highlight language-python"><span class="n">draw_layer_on_top</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.draw_layer_on_top" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Move user-drawn feature layer to the top of all layers.</p>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">draw_layer_on_top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Move user-drawn feature layer to the top of all layers."""</span>
    <span class="n">draw_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Drawn Features"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">draw_layer_index</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">draw_layer_index</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">draw_layer_index</span><span class="p">]</span>
            <span class="o">+</span> <span class="n">layers</span><span class="p">[(</span><span class="n">draw_layer_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">:]</span>
            <span class="o">+</span> <span class="p">[</span><span class="n">layers</span><span class="p">[</span><span class="n">draw_layer_index</span><span class="p">]]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">layers</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.extract_values_to_points">

<code class="highlight language-python"><span class="n">extract_values_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.extract_values_to_points" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Exports pixel values to a csv file based on user-drawn geometries.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the csv file or shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">extract_values_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="sd">"""Exports pixel values to a csv file based on user-drawn geometries.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The output file path to the csv file or shapefile.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">csv</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"csv"</span><span class="p">,</span> <span class="s2">"shp"</span><span class="p">]</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>

    <span class="k">if</span> <span class="n">ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">"The output file must be one of the following: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">out_csv</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"csv"</span>
    <span class="n">out_shp</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"shp"</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_points</span><span class="p">)</span>
    <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"id"</span><span class="p">,</span> <span class="s2">"longitude"</span><span class="p">,</span> <span class="s2">"latitude"</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_labels</span>
        <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">out_list</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">"csv"</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The csv file has been saved to: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_csv</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">csv_to_shp</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The shapefile has been saved to: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_shp</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.find_layer">

<code class="highlight language-python"><span class="n">find_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.find_layer" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Finds layer by name</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>Name of the layer to find.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ipyleaflet layer object.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Finds layer by name</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Name of the layer to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ipyleaflet layer object.</span>
<span class="sd">    """</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.find_layer_index">

<code class="highlight language-python"><span class="n">find_layer_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.find_layer_index" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Finds layer index by name</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>Name of the layer to find.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>
<p>Index of the layer with the specified name</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_layer_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Finds layer index by name</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Name of the layer to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Index of the layer with the specified name</span>
<span class="sd">    """</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">layer</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">layers</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">index</span>

    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.get_scale">

<code class="highlight language-python"><span class="n">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.get_scale" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Returns the approximate pixel scale of the current map view, in meters.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>
<p>Map resolution in meters.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Returns the approximate pixel scale of the current map view, in meters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Map resolution in meters.</span>
<span class="sd">    """</span>
    <span class="n">zoom_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span>
    <span class="c1"># Reference: https://blogs.bing.com/maps/2006/02/25/map-control-zoom-levels-gt-resolution</span>
    <span class="n">resolution</span> <span class="o">=</span> <span class="mf">156543.04</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">zoom_level</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resolution</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.getScale">

<code class="highlight language-python"><span class="n">getScale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.getScale" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Returns the approximate pixel scale of the current map view, in meters.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>
<p>Map resolution in meters.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Returns the approximate pixel scale of the current map view, in meters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Map resolution in meters.</span>
<span class="sd">    """</span>
    <span class="n">zoom_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span>
    <span class="c1"># Reference: https://blogs.bing.com/maps/2006/02/25/map-control-zoom-levels-gt-resolution</span>
    <span class="n">resolution</span> <span class="o">=</span> <span class="mf">156543.04</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">zoom_level</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resolution</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.image_overlay">

<code class="highlight language-python"><span class="n">image_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.image_overlay" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Overlays an image from the Internet or locally on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>http URL or local file path to the image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bounds</code></td>
<td><code>tuple</code></td>
<td>
<p>bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>name of the layer to show on the layer control.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Overlays an image from the Internet or locally on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): http URL or local file path to the image.</span>
<span class="sd">        bounds (tuple): bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">        name (str): name of the layer to show on the layer control.</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64encode</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageSequence</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"http"</span><span class="p">):</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">"The provided file does not exist."</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">url</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># file extension</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

            <span class="n">f</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"gif"</span><span class="p">:</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="c1"># Loop over each frame in the animated image</span>
                <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">ImageSequence</span><span class="o">.</span><span class="n">Iterator</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
                    <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">"RGBA"</span><span class="p">)</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">frame</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">"gif"</span><span class="p">)</span>
                    <span class="n">frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
                    <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
                <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
                    <span class="n">f</span><span class="p">,</span>
                    <span class="nb">format</span><span class="o">=</span><span class="s2">"GIF"</span><span class="p">,</span>
                    <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                    <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"ascii"</span><span class="p">)</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">"data:image/</span><span class="si">{}</span><span class="s2">;base64,"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ImageOverlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.layer_opacity">

<code class="highlight language-python"><span class="n">layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.layer_opacity" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Changes layer opacity.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the layer to change opacity.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>float</code></td>
<td>
<p>The opacity value to set. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">"""Changes layer opacity.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer to change opacity.</span>
<span class="sd">        value (float, optional): The opacity value to set. Defaults to 1.0.</span>
<span class="sd">    """</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">layer</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.marker_cluster">

<code class="highlight language-python"><span class="n">marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.marker_cluster" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds a marker cluster to the map and returns a list of ee.Feature, which can be accessed using Map.ee_marker_cluster.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>a list of ee.Feature</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Adds a marker cluster to the map and returns a list of ee.Feature, which can be accessed using Map.ee_marker_cluster.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: a list of ee.Feature</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Marker Cluster"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"coordinates"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"click"</span><span class="p">:</span>
            <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">feature</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
            <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
            <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"mousemove"</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># cursor style: https://www.w3schools.com/cssref/pr_class_cursor.asp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"cursor"</span><span class="p">:</span> <span class="s2">"crosshair"</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.plot">

<code class="highlight language-python"><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.plot" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Creates a plot based on x-array and y-array data.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x</code></td>
<td><code>numpy.ndarray or list</code></td>
<td>
<p>The x-coordinates of the plotted line.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>y</code></td>
<td><code>numpy.ndarray or list</code></td>
<td>
<p>The y-coordinates of the plotted line.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>str</code></td>
<td>
<p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>overlay</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to overlay plotted lines on the figure. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the control, can be ‚Äòbottomleft‚Äô, ‚Äòbottomright‚Äô, ‚Äòtopleft‚Äô, or ‚Äòtopright‚Äô. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>min_width</code></td>
<td><code>int</code></td>
<td>
<p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_width</code></td>
<td><code>int</code></td>
<td>
<p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>min_height</code></td>
<td><code>int</code></td>
<td>
<p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_height</code></td>
<td><code>int</code></td>
<td>
<p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">x</span><span class="p">,</span>
    <span class="n">y</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span><span class="p">,</span>
    <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Creates a plot based on x-array and y-array data.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (numpy.ndarray or list): The x-coordinates of the plotted line.</span>
<span class="sd">        y (numpy.ndarray or list): The y-coordinates of the plotted line.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be ‚Äòbottomleft‚Äô, ‚Äòbottomright‚Äô, ‚Äòtopleft‚Äô, or ‚Äòtopright‚Äô. Defaults to 'bottomright'.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">plot_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">"border"</span><span class="p">:</span> <span class="s2">"1px solid black"</span><span class="p">})</span>
        <span class="n">plot_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">plot_widget</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
            <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
            <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
            <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span> <span class="o">=</span> <span class="n">plot_widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span> <span class="o">=</span> <span class="n">plot_control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">plot_control</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="mi">500</span>
    <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">300</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">plot_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">"markers"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">"markers"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"circle"</span>

    <span class="k">with</span> <span class="n">plot_widget</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_width</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"px"</span>
            <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_height</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"px"</span>

            <span class="n">plot_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">overlay</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">plot_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">"marker"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s2">"marker"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"circle"</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">"bar"</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">"scatter"</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">"hist"</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Failed to create plot."</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.plot_demo">

<code class="highlight language-python"><span class="n">plot_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.plot_demo" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>A demo of interactive plotting using random pixel coordinates.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>iterations</code></td>
<td><code>int</code></td>
<td>
<p>How many iterations to run for the demo. Defaults to 20.</p>
</td>
<td><code>20</code></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>str</code></td>
<td>
<p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>overlay</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to overlay plotted lines on the figure. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the control, can be ‚Äòbottomleft‚Äô, ‚Äòbottomright‚Äô, ‚Äòtopleft‚Äô, or ‚Äòtopright‚Äô. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>min_width</code></td>
<td><code>int</code></td>
<td>
<p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_width</code></td>
<td><code>int</code></td>
<td>
<p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>min_height</code></td>
<td><code>int</code></td>
<td>
<p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_height</code></td>
<td><code>int</code></td>
<td>
<p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">plot_demo</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span><span class="p">,</span>
    <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""A demo of interactive plotting using random pixel coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        iterations (int, optional): How many iterations to run for the demo. Defaults to 20.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be ‚Äòbottomleft‚Äô, ‚Äòbottomright‚Äô, ‚Äòtopleft‚Äô, or ‚Äòtopright‚Äô. Defaults to 'bottomright'.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">time</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span><span class="p">)</span>

    <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s2">"LE7_TOA_5YEAR/1999_2003"</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span>
        <span class="n">image</span><span class="p">,</span>
        <span class="p">{</span><span class="s2">"bands"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"B4"</span><span class="p">,</span> <span class="s2">"B3"</span><span class="p">,</span> <span class="s2">"B2"</span><span class="p">],</span> <span class="s2">"gamma"</span><span class="p">:</span> <span class="mf">1.4</span><span class="p">},</span>
        <span class="s2">"LE7_TOA_5YEAR/1999_2003"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="o">-</span><span class="mf">50.078877</span><span class="p">,</span> <span class="mf">25.190030</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">band_names</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="c1"># band_count = len(band_names)</span>

    <span class="n">latitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">iterations</span><span class="p">)</span>
    <span class="n">longitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">121</span><span class="p">,</span> <span class="o">-</span><span class="mi">76</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">iterations</span><span class="p">)</span>

    <span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="o">=</span> <span class="n">marker</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">coordinate</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">([</span><span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
            <span class="n">dict_values</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">coordinate</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">band_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_values</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s2">"</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">: Spectral signature at (</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">iterations</span><span class="p">,</span>
                <span class="nb">round</span><span class="p">(</span><span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
                <span class="nb">round</span><span class="p">(</span><span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">marker</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">band_names</span><span class="p">,</span>
                <span class="n">band_values</span><span class="p">,</span>
                <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
                <span class="n">overlay</span><span class="o">=</span><span class="n">overlay</span><span class="p">,</span>
                <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
                <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
                <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.plot_raster">

<code class="highlight language-python"><span class="n">plot_raster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.plot_raster" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Interactive plotting of Earth Engine data by clicking on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The ee.Image or ee.ImageCollection to sample. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>sample_scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to sample in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>str</code></td>
<td>
<p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>overlay</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to overlay plotted lines on the figure. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the control, can be ‚Äòbottomleft‚Äô, ‚Äòbottomright‚Äô, ‚Äòtopleft‚Äô, or ‚Äòtopright‚Äô. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>min_width</code></td>
<td><code>int</code></td>
<td>
<p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_width</code></td>
<td><code>int</code></td>
<td>
<p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>min_height</code></td>
<td><code>int</code></td>
<td>
<p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_height</code></td>
<td><code>int</code></td>
<td>
<p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">plot_raster</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span><span class="p">,</span>
    <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Interactive plotting of Earth Engine data by clicking on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object, optional): The ee.Image or ee.ImageCollection to sample. Defaults to None.</span>
<span class="sd">        sample_scale (float, optional): A nominal scale in meters of the projection to sample in. Defaults to None.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be ‚Äòbottomleft‚Äô, ‚Äòbottomright‚Äô, ‚Äòtopleft‚Äô, or ‚Äòtopright‚Äô. Defaults to 'bottomright'.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span><span class="p">)</span>

    <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">"border"</span><span class="p">:</span> <span class="s2">"1px solid black"</span><span class="p">})</span>
    <span class="n">plot_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">plot_widget</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
        <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
        <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
        <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span> <span class="o">=</span> <span class="n">plot_widget</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span> <span class="o">=</span> <span class="n">plot_control</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">plot_control</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"cursor"</span><span class="p">:</span> <span class="s2">"crosshair"</span><span class="p">}</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">"The plot function can only be used on ee.Image or ee.ImageCollection with more than one band."</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ee_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">sample_scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">sample_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getScale</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="mi">500</span>

    <span class="n">band_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Marker Cluster"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs2</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"coordinates"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kwargs2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"click"</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"cursor"</span><span class="p">:</span> <span class="s2">"wait"</span><span class="p">}</span>
                <span class="n">xy</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">latlon</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">dict_values</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">ee_object</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">sample_scale</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">first</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="n">band_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_values</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                    <span class="n">band_names</span><span class="p">,</span>
                    <span class="n">band_values</span><span class="p">,</span>
                    <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
                    <span class="n">overlay</span><span class="o">=</span><span class="n">overlay</span><span class="p">,</span>
                    <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                    <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
                    <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
                    <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"cursor"</span><span class="p">:</span> <span class="s2">"crosshair"</span><span class="p">}</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">"No data for the clicked location."</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"cursor"</span><span class="p">:</span> <span class="s2">"crosshair"</span><span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.remove_colorbar">

<code class="highlight language-python"><span class="n">remove_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.remove_colorbar" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Remove colorbar from the map.</p>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">remove_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Remove colorbar from the map."""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.remove_drawn_features">

<code class="highlight language-python"><span class="n">remove_drawn_features</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.remove_drawn_features" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Removes user-drawn geometries from the map</p>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">remove_drawn_features</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Removes user-drawn geometries from the map"""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_json</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_bounds</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_rois</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart_points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart_labels</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_control</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.remove_last_drawn">

<code class="highlight language-python"><span class="n">remove_last_drawn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.remove_last_drawn" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Removes user-drawn geometries from the map</p>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">remove_last_drawn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Removes user-drawn geometries from the map"""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">ee_draw_layer</span> <span class="o">=</span> <span class="n">ee_tile_layer</span><span class="p">(</span>
            <span class="n">collection</span><span class="p">,</span> <span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"blue"</span><span class="p">},</span> <span class="s2">"Drawn Features"</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mf">0.5</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_drawn_features</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">substitute_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span><span class="p">,</span> <span class="n">ee_draw_layer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span> <span class="o">=</span> <span class="n">ee_draw_layer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_count</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span> <span class="o">=</span> <span class="n">ee_draw_layer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_json</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_bounds</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span>
                <span class="n">collection</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="n">collection</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">user_rois</span> <span class="o">=</span> <span class="n">collection</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chart_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_values</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chart_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="c1"># self.chart_labels = None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.set_center">

<code class="highlight language-python"><span class="n">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.set_center" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Centers the map view at a given coordinates with the given zoom level.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lon</code></td>
<td><code>float</code></td>
<td>
<p>The longitude of the center, in degrees.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>lat</code></td>
<td><code>float</code></td>
<td>
<p>The latitude of the center, in degrees.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>The zoom level, from 1 to 24. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Centers the map view at a given coordinates with the given zoom level.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the center, in degrees.</span>
<span class="sd">        lat (float): The latitude of the center, in degrees.</span>
<span class="sd">        zoom (int, optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">zoom</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.set_control_visibility">

<code class="highlight language-python"><span class="n">set_control_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.set_control_visibility" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Sets the visibility of the controls on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layerControl</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>fullscreenControl</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that allows the user to make the map full-screen. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>latLngPopup</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_control_visibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
    <span class="sd">"""Sets the visibility of the controls on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layerControl (bool, optional): Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</span>
<span class="sd">        fullscreenControl (bool, optional): Whether to show the control that allows the user to make the map full-screen. Defaults to True.</span>
<span class="sd">        latLngPopup (bool, optional): Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="k">pass</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.set_options">

<code class="highlight language-python"><span class="n">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.set_options" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds Google basemap and controls to the ipyleaflet map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mapTypeId</code></td>
<td><code>str</code></td>
<td>
<p>A mapTypeId to set the basemap to. Can be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select one of the standard Google Maps API map types. Defaults to 'HYBRID'.</p>
</td>
<td><code>'HYBRID'</code></td>
</tr>
<tr>
<td><code>styles</code></td>
<td><code>object</code></td>
<td>
<p>A dictionary of custom MapTypeStyle objects keyed with a name that will appear in the map's Map Type Controls. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>types</code></td>
<td><code>list</code></td>
<td>
<p>A list of mapTypeIds to make available. If omitted, but opt_styles is specified, appends all of the style keys to the standard Google Maps API map types.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s2">"HYBRID"</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Adds Google basemap and controls to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        mapTypeId (str, optional): A mapTypeId to set the basemap to. Can be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select one of the standard Google Maps API map types. Defaults to 'HYBRID'.</span>
<span class="sd">        styles (object, optional): A dictionary of custom MapTypeStyle objects keyed with a name that will appear in the map's Map Type Controls. Defaults to None.</span>
<span class="sd">        types (list, optional): A list of mapTypeIds to make available. If omitted, but opt_styles is specified, appends all of the style keys to the standard Google Maps API map types.. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_layers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scroll_wheel_zoom</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ZoomControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"topleft"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"topright"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ScaleControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"bottomleft"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">DrawControl</span><span class="p">())</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MeasureControl</span><span class="p">(</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">"bottomleft"</span><span class="p">,</span>
        <span class="n">active_color</span><span class="o">=</span><span class="s2">"orange"</span><span class="p">,</span>
        <span class="n">primary_length_unit</span><span class="o">=</span><span class="s2">"kilometers"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">basemap_tiles</span><span class="p">[</span><span class="n">mapTypeId</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">'Google basemaps can only be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN".'</span>
        <span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.set_plot_options">

<code class="highlight language-python"><span class="n">set_plot_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_marker_cluster</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.set_plot_options" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Sets plotting options.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>add_marker_cluster</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add a marker cluster. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>sample_scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to sample in . Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>str</code></td>
<td>
<p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>overlay</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to overlay plotted lines on the figure. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the control, can be ‚Äòbottomleft‚Äô, ‚Äòbottomright‚Äô, ‚Äòtopleft‚Äô, or ‚Äòtopright‚Äô. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>min_width</code></td>
<td><code>int</code></td>
<td>
<p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_width</code></td>
<td><code>int</code></td>
<td>
<p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>min_height</code></td>
<td><code>int</code></td>
<td>
<p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_height</code></td>
<td><code>int</code></td>
<td>
<p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_plot_options</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">add_marker_cluster</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span><span class="p">,</span>
    <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Sets plotting options.</span>

<span class="sd">    Args:</span>
<span class="sd">        add_marker_cluster (bool, optional): Whether to add a marker cluster. Defaults to False.</span>
<span class="sd">        sample_scale (float, optional):  A nominal scale in meters of the projection to sample in . Defaults to None.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be ‚Äòbottomleft‚Äô, ‚Äòbottomright‚Äô, ‚Äòtopleft‚Äô, or ‚Äòtopright‚Äô. Defaults to 'bottomright'.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>

<span class="sd">    """</span>
    <span class="n">plot_options_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"add_marker_cluster"</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_marker_cluster</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"sample_scale"</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_scale</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"plot_type"</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot_type</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"overlay"</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlay</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"position"</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"min_width"</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_width</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"max_width"</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_width</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"min_height"</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_height</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">"max_height"</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">plot_options</span> <span class="o">=</span> <span class="n">plot_options_dict</span>

    <span class="k">if</span> <span class="n">add_marker_cluster</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_marker_cluster</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_marker_cluster</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.setCenter">

<code class="highlight language-python"><span class="n">setCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.setCenter" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Centers the map view at a given coordinates with the given zoom level.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lon</code></td>
<td><code>float</code></td>
<td>
<p>The longitude of the center, in degrees.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>lat</code></td>
<td><code>float</code></td>
<td>
<p>The latitude of the center, in degrees.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>The zoom level, from 1 to 24. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Centers the map view at a given coordinates with the given zoom level.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the center, in degrees.</span>
<span class="sd">        lat (float): The latitude of the center, in degrees.</span>
<span class="sd">        zoom (int, optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">zoom</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.setControlVisibility">

<code class="highlight language-python"><span class="n">setControlVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.setControlVisibility" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Sets the visibility of the controls on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layerControl</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>fullscreenControl</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that allows the user to make the map full-screen. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>latLngPopup</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_control_visibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
    <span class="sd">"""Sets the visibility of the controls on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layerControl (bool, optional): Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</span>
<span class="sd">        fullscreenControl (bool, optional): Whether to show the control that allows the user to make the map full-screen. Defaults to True.</span>
<span class="sd">        latLngPopup (bool, optional): Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="k">pass</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.setOptions">

<code class="highlight language-python"><span class="n">setOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.setOptions" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds Google basemap and controls to the ipyleaflet map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mapTypeId</code></td>
<td><code>str</code></td>
<td>
<p>A mapTypeId to set the basemap to. Can be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select one of the standard Google Maps API map types. Defaults to 'HYBRID'.</p>
</td>
<td><code>'HYBRID'</code></td>
</tr>
<tr>
<td><code>styles</code></td>
<td><code>object</code></td>
<td>
<p>A dictionary of custom MapTypeStyle objects keyed with a name that will appear in the map's Map Type Controls. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>types</code></td>
<td><code>list</code></td>
<td>
<p>A list of mapTypeIds to make available. If omitted, but opt_styles is specified, appends all of the style keys to the standard Google Maps API map types.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s2">"HYBRID"</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Adds Google basemap and controls to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        mapTypeId (str, optional): A mapTypeId to set the basemap to. Can be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select one of the standard Google Maps API map types. Defaults to 'HYBRID'.</span>
<span class="sd">        styles (object, optional): A dictionary of custom MapTypeStyle objects keyed with a name that will appear in the map's Map Type Controls. Defaults to None.</span>
<span class="sd">        types (list, optional): A list of mapTypeIds to make available. If omitted, but opt_styles is specified, appends all of the style keys to the standard Google Maps API map types.. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_layers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scroll_wheel_zoom</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ZoomControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"topleft"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"topright"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ScaleControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"bottomleft"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">DrawControl</span><span class="p">())</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MeasureControl</span><span class="p">(</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">"bottomleft"</span><span class="p">,</span>
        <span class="n">active_color</span><span class="o">=</span><span class="s2">"orange"</span><span class="p">,</span>
        <span class="n">primary_length_unit</span><span class="o">=</span><span class="s2">"kilometers"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">basemap_tiles</span><span class="p">[</span><span class="n">mapTypeId</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">'Google basemaps can only be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN".'</span>
        <span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.split_map">

<code class="highlight language-python"><span class="n">split_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_layer</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="s1">'ESRI'</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.split_map" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Adds split map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>left_layer</code></td>
<td><code>str</code></td>
<td>
<p>The layer tile layer. Defaults to 'HYBRID'.</p>
</td>
<td><code>'HYBRID'</code></td>
</tr>
<tr>
<td><code>right_layer</code></td>
<td><code>str</code></td>
<td>
<p>The right tile layer. Defaults to 'ESRI'.</p>
</td>
<td><code>'ESRI'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">split_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_layer</span><span class="o">=</span><span class="s2">"HYBRID"</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="s2">"ESRI"</span><span class="p">):</span>
    <span class="sd">"""Adds split map.</span>

<span class="sd">    Args:</span>
<span class="sd">        left_layer (str, optional): The layer tile layer. Defaults to 'HYBRID'.</span>
<span class="sd">        right_layer (str, optional): The right tile layer. Defaults to 'ESRI'.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">left_layer</span> <span class="ow">in</span> <span class="n">basemap_tiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">left_layer</span> <span class="o">=</span> <span class="n">basemap_tiles</span><span class="p">[</span><span class="n">left_layer</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">right_layer</span> <span class="ow">in</span> <span class="n">basemap_tiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">right_layer</span> <span class="o">=</span> <span class="n">basemap_tiles</span><span class="p">[</span><span class="n">right_layer</span><span class="p">]</span>

        <span class="n">control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span>
            <span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The provided layers are invalid!"</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.to_html">

<code class="highlight language-python"><span class="n">to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'My Map'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">'100%'</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">'880px'</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.to_html" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Saves the map as a HTML file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>outfile</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the HTML file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>title</code></td>
<td><code>str</code></td>
<td>
<p>The title of the HTML file. Defaults to 'My Map'.</p>
</td>
<td><code>'My Map'</code></td>
</tr>
<tr>
<td><code>width</code></td>
<td><code>str</code></td>
<td>
<p>The width of the map in pixels or percentage. Defaults to '100%'.</p>
</td>
<td><code>'100%'</code></td>
</tr>
<tr>
<td><code>height</code></td>
<td><code>str</code></td>
<td>
<p>The height of the map in pixels. Defaults to '880px'.</p>
</td>
<td><code>'880px'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"My Map"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">"100%"</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">"880px"</span><span class="p">):</span>
    <span class="sd">"""Saves the map as a HTML file.</span>

<span class="sd">    Args:</span>
<span class="sd">        outfile (str): The output file path to the HTML file.</span>
<span class="sd">        title (str, optional): The title of the HTML file. Defaults to 'My Map'.</span>
<span class="sd">        width (str, optional): The width of the map in pixels or percentage. Defaults to '100%'.</span>
<span class="sd">        height (str, optional): The height of the map in pixels. Defaults to '880px'.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">outfile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".html"</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"The output file must end with .html"</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

        <span class="n">before_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span>
        <span class="n">before_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"width must be a string."</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"px"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"%"</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"width must end with px or %"</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"height must be a string."</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"px"</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"height must end with px"</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">before_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">before_height</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.to_image">

<code class="highlight language-python"><span class="n">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.to_image" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Saves the map as a PNG or JPG image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>outfile</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the image. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>monitor</code></td>
<td><code>int</code></td>
<td>
<p>The monitor to take the screenshot. Defaults to 1.</p>
</td>
<td><code>1</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">"""Saves the map as a PNG or JPG image.</span>

<span class="sd">    Args:</span>
<span class="sd">        outfile (str, optional): The output file path to the image. Defaults to None.</span>
<span class="sd">        monitor (int, optional): The monitor to take the screenshot. Defaults to 1.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">"my_map.png"</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">outfile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".png"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">outfile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".jpg"</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The output file must be a PNG or JPG image."</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">work_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>

    <span class="n">screenshot</span> <span class="o">=</span> <span class="n">screen_capture</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">monitor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">screenshot</span> <span class="o">=</span> <span class="n">screenshot</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.toolbar_reset">

<code class="highlight language-python"><span class="n">toolbar_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.toolbar_reset" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Reset the toolbar so that no tool is selected.</p>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">toolbar_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Reset the toolbar so that no tool is selected."""</span>
    <span class="n">toolbar_grid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span>
    <span class="k">for</span> <span class="n">tool</span> <span class="ow">in</span> <span class="n">toolbar_grid</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">tool</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.ts_inspector">

<code class="highlight language-python"><span class="n">ts_inspector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_ts</span><span class="p">,</span> <span class="n">right_ts</span><span class="p">,</span> <span class="n">left_names</span><span class="p">,</span> <span class="n">right_names</span><span class="p">,</span> <span class="n">left_vis</span><span class="o">=</span><span class="p">{},</span> <span class="n">right_vis</span><span class="o">=</span><span class="p">{})</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.ts_inspector" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Creates a split-panel map for inspecting timeseries images.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>left_ts</code></td>
<td><code>object</code></td>
<td>
<p>An ee.ImageCollection to show on the left panel.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>right_ts</code></td>
<td><code>object</code></td>
<td>
<p>An ee.ImageCollection to show on the right panel.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>left_names</code></td>
<td><code>list</code></td>
<td>
<p>A list of names to show under the left dropdown.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>right_names</code></td>
<td><code>list</code></td>
<td>
<p>A list of names to show under the right dropdown.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>left_vis</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters for the left layer. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>right_vis</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters for the right layer. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ts_inspector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">left_ts</span><span class="p">,</span>
    <span class="n">right_ts</span><span class="p">,</span>
    <span class="n">left_names</span><span class="p">,</span>
    <span class="n">right_names</span><span class="p">,</span>
    <span class="n">left_vis</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">right_vis</span><span class="o">=</span><span class="p">{},</span>
<span class="p">):</span>
    <span class="sd">"""Creates a split-panel map for inspecting timeseries images.</span>

<span class="sd">    Args:</span>
<span class="sd">        left_ts (object): An ee.ImageCollection to show on the left panel.</span>
<span class="sd">        right_ts (object): An ee.ImageCollection to show on the right panel.</span>
<span class="sd">        left_names (list): A list of names to show under the left dropdown.</span>
<span class="sd">        right_names (list): A list of names to show under the right dropdown.</span>
<span class="sd">        left_vis (dict, optional): Visualization parameters for the left layer. Defaults to {}.</span>
<span class="sd">        right_vis (dict, optional): Visualization parameters for the right layer. Defaults to {}.</span>
<span class="sd">    """</span>
    <span class="n">left_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
    <span class="n">right_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">right_ts</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">left_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">left_names</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">"The number of images in left_ts must match the number of layer names in left_names."</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">right_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">right_names</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">"The number of images in right_ts must match the number of layer names in right_names."</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">left_layer</span> <span class="o">=</span> <span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="s2">"https://mt1.google.com/vt/lyrs=m&amp;x=</span><span class="si">{x}</span><span class="s2">&amp;y=</span><span class="si">{y}</span><span class="s2">&amp;z=</span><span class="si">{z}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">"Google"</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">"Google Maps"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">right_layer</span> <span class="o">=</span> <span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="s2">"https://mt1.google.com/vt/lyrs=m&amp;x=</span><span class="si">{x}</span><span class="s2">&amp;y=</span><span class="si">{y}</span><span class="s2">&amp;z=</span><span class="si">{z}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">"Google"</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">"Google Maps"</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>
    <span class="n">left_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">left_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">right_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">right_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">left_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">"130px"</span>
    <span class="n">right_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">"130px"</span>

    <span class="n">left_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">left_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"topleft"</span><span class="p">)</span>
    <span class="n">right_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">right_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"topright"</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="n">left_control</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="n">right_control</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ZoomControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"topleft"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ScaleControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"bottomleft"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">left_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">left_dropdown_index</span> <span class="o">=</span> <span class="n">left_dropdown</span><span class="o">.</span><span class="n">index</span>
        <span class="k">if</span> <span class="n">left_dropdown_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">left_dropdown_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">left_ts</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">left_dropdown_index</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">left_ts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">left_dropdown_index</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">"The left_ts argument must be an ImageCollection."</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">left_image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">left_image</span><span class="p">)</span>

                <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee_tile_layer</span><span class="p">(</span>
                    <span class="n">left_image</span><span class="p">,</span> <span class="n">left_vis</span><span class="p">,</span> <span class="n">left_names</span><span class="p">[</span><span class="n">left_dropdown_index</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">left_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">left_image</span><span class="o">.</span><span class="n">url</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

    <span class="n">left_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">left_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">"value"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">right_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">right_dropdown_index</span> <span class="o">=</span> <span class="n">right_dropdown</span><span class="o">.</span><span class="n">index</span>
        <span class="k">if</span> <span class="n">right_dropdown_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">right_dropdown_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">right_ts</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">right_dropdown_index</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">right_ts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">right_dropdown_index</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">"The left_ts argument must be an ImageCollection."</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">right_image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">right_image</span><span class="p">)</span>

                <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee_tile_layer</span><span class="p">(</span>
                    <span class="n">right_image</span><span class="p">,</span>
                    <span class="n">right_vis</span><span class="p">,</span>
                    <span class="n">right_names</span><span class="p">[</span><span class="n">right_dropdown_index</span><span class="p">],</span>
                <span class="p">)</span>
                <span class="n">right_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">right_image</span><span class="o">.</span><span class="n">url</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

    <span class="n">right_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">right_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">"value"</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">split_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span>
            <span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">split_control</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.video_overlay">

<code class="highlight language-python"><span class="n">video_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.video_overlay" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Overlays a video from the Internet on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>http URL of the video, such as "https://www.mapbox.com/bites/00188/patricia_nasa.webm"</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bounds</code></td>
<td><code>tuple</code></td>
<td>
<p>bounding box of the video in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>name of the layer to show on the layer control.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">video_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Overlays a video from the Internet on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): http URL of the video, such as "https://www.mapbox.com/bites/00188/patricia_nasa.webm"</span>
<span class="sd">        bounds (tuple): bounding box of the video in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">        name (str): name of the layer to show on the layer control.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">video</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">VideoOverlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.zoom_to_object">

<code class="highlight language-python"><span class="n">zoom_to_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.zoom_to_object" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Zoom to the full extent of an Earth Engine object.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>An Earth Engine object, such as Image, ImageCollection, Geometry, Feature, FeatureCollection.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Exception</code></td>
<td>
<p>Error getting geometry.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">zoom_to_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">):</span>
    <span class="sd">"""Zoom to the full extent of an Earth Engine object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An Earth Engine object, such as Image, ImageCollection, Geometry, Feature, FeatureCollection.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: Error getting geometry.</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">"coordinates"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">"coordinates"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">coordinates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">south</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">west</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">north</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">east</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">],</span> <span class="p">[</span><span class="n">north</span><span class="p">,</span> <span class="n">west</span><span class="p">]])</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.zoomToObject">

<code class="highlight language-python"><span class="n">zoomToObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.Map.zoomToObject" title="Permanent link">&para;</a></h3>
<div class="doc doc-contents ">
<p>Zoom to the full extent of an Earth Engine object.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>An Earth Engine object, such as Image, ImageCollection, Geometry, Feature, FeatureCollection.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Exception</code></td>
<td>
<p>Error getting geometry.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">zoom_to_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">):</span>
    <span class="sd">"""Zoom to the full extent of an Earth Engine object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An Earth Engine object, such as Image, ImageCollection, Geometry, Feature, FeatureCollection.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: Error getting geometry.</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">"coordinates"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">"coordinates"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">coordinates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">south</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">west</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">north</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">east</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">],</span> <span class="p">[</span><span class="n">north</span><span class="p">,</span> <span class="n">west</span><span class="p">]])</span>
</code></pre>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_tile_layer">

<code class="highlight language-python"><span class="n">ee_tile_layer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Layer untitled'</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


      <a class="headerlink" href="#geemap.geemap.ee_tile_layer" title="Permanent link">&para;</a></h2>
<div class="doc doc-contents ">
<p>Converts and Earth Engine layer to ipyleaflet TileLayer.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Collection|Feature|Image|MapId</code></td>
<td>
<p>The object to add to the map.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>The visualization parameters. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the layer. Defaults to 'Layer untitled'.</p>
</td>
<td><code>'Layer untitled'</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The layer's opacity represented as a number between 0 and 1. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_tile_layer</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="s2">"Layer untitled"</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span>
<span class="p">):</span>
    <span class="sd">"""Converts and Earth Engine layer to ipyleaflet TileLayer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Collection|Feature|Image|MapId): The object to add to the map.</span>
<span class="sd">        vis_params (dict, optional): The visualization parameters. Defaults to {}.</span>
<span class="sd">        name (str, optional): The name of the layer. Defaults to 'Layer untitled'.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer's opacity represented as a number between 0 and 1. Defaults to 1.</span>
<span class="sd">    """</span>

    <span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">err_str</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n\n</span><span class="s2">The image argument in 'addLayer' function must be an instace of one of ee.Image, ee.Geometry, ee.Feature or ee.FeatureCollection."</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span>
        <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span>
        <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>

        <span class="n">width</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="s2">"width"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"width"</span><span class="p">]</span>

        <span class="n">color</span> <span class="o">=</span> <span class="s2">"000000"</span>

        <span class="k">if</span> <span class="s2">"color"</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">"color"</span><span class="p">]</span>

        <span class="n">image_fill</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">"fillColor"</span><span class="p">:</span> <span class="n">color</span><span class="p">})</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">image_outline</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"00000000"</span><span class="p">,</span> <span class="s2">"width"</span><span class="p">:</span> <span class="n">width</span><span class="p">}</span>
        <span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">image_fill</span><span class="o">.</span><span class="n">blend</span><span class="p">(</span><span class="n">image_outline</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">imagecollection</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>

    <span class="n">map_id_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">getMapId</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span>
    <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">map_id_dict</span><span class="p">[</span><span class="s2">"tile_fetcher"</span><span class="p">]</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">"Google Earth Engine"</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">tile_layer</span>
</code></pre>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: 2021-02-23
    
  </small>
</div>
                  
                
              

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../eefolium/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              eefolium module
            </div>
          </div>
        </a>
      
      
        <a href="../legends/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              legends module
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "search.highlight"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.217ffd95.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.926459b3.min.js"></script>
      
    
  </body>
</html>